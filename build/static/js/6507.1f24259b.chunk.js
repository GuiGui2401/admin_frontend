"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6507],{28645:(e,s,t)=>{t.d(s,{A:()=>h});var a=t(9950),i=t(66362),l=t(69216),n=t(80737),r=t(25933),d=t(57811),c=t(72906),o=t(70030),u=t(44414);const{Text:m}=i.A,h=e=>{let{columns:s=[],setColumns:t}=e;const{t:i}=(0,o.B)(),[h,x]=(0,a.useState)(!1),A=(0,u.jsx)(l.A,{children:null===s||void 0===s?void 0:s.map(((e,a)=>(0,u.jsx)(l.A.Item,{children:(0,u.jsxs)(n.A,{className:"d-flex justify-content-between",children:[(0,u.jsx)(m,{children:e.title}),(0,u.jsx)(r.A,{defaultChecked:!0,onClick:()=>{!function(e){const a=null===s||void 0===s?void 0:s.map((s=>(s.dataIndex===e.dataIndex&&(s.is_show=!(null!==s&&void 0!==s&&s.is_show)),s)));t(a)}(e)}})]})},a)))});return(0,u.jsx)(d.A,{overlay:A,trigger:["click"],onVisibleChange:e=>{x(e)},visible:h,children:(0,u.jsx)(c.A,{style:{fontSize:"26px"}})})}},38888:(e,s,t)=>{t.r(s),t.d(s,{default:()=>I});var a=t(9950),i=t(25933),l=t(48538),n=t(20567),r=t(73092),d=t(24513),c=t(55386),o=t(76083),u=t(82371);const m={get:e=>u.A.get("dashboard/admin/sms-gateways",{params:e}),getById:(e,s)=>u.A.get(`dashboard/admin/sms-gateways/${e}`,{params:s}),update:(e,s)=>u.A.put(`dashboard/admin/sms-gateways/${e}`,s),setActive:(e,s)=>u.A.post(`dashboard/admin/sms-gateways/${e}/active/status`,s)};var h=t(87827),x=t(27741),A=t(87094),j=t(41988),g=t(55902),p=t(56952),v=t(70030),f=t(44414);function y(e){let{modal:s,handleCancel:t,refetch:i}=e;const[n]=h.A.useForm(),{t:r}=(0,v.B)(),[d,c]=(0,a.useState)(!1);return(0,f.jsx)(x.A,{visible:!!s,title:null===s||void 0===s?void 0:s.title,onCancel:t,footer:[(0,f.jsx)(l.A,{type:"primary",onClick:()=>n.submit(),loading:d,children:r("save")},"save-btn"),(0,f.jsx)(l.A,{type:"default",onClick:t,children:r("cancel")},"cancel-btn")],children:(0,f.jsx)(h.A,{form:n,layout:"vertical",onFinish:e=>{c(!0),m.update(s.id,e).then((()=>{t(),i()})).finally((()=>c(!1)))},initialValues:s,children:(0,f.jsxs)(A.A,{gutter:12,children:[(0,f.jsxs)(j.A,{span:24,children:[(0,f.jsx)(h.A.Item,{label:"From",name:"from",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{})}),(0,f.jsx)(h.A.Item,{label:"Messaging Service ID",name:"service_id",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(p.A,{min:0,className:"w-100"})})]}),(0,f.jsx)(j.A,{span:24,children:(0,f.jsx)(h.A.Item,{label:"API Key",name:"api_key",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{})})}),(0,f.jsx)(j.A,{span:24,children:(0,f.jsx)(h.A.Item,{label:"API Secret",name:"secret_key",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{})})}),(0,f.jsx)(j.A,{span:24,children:(0,f.jsx)(h.A.Item,{label:"OTP template",name:"text",rules:[{required:!0,message:r("required")},e=>{let{getFieldValue:s}=e;return{validator:()=>s("text").includes("#OTP#")?Promise.resolve():Promise.reject("#OTP# is required as your code will be placed here")}}],children:(0,f.jsx)(g.A,{})})})]})})})}function b(e){let{modal:s,handleCancel:t,refetch:i}=e;const[n]=h.A.useForm(),{t:r}=(0,v.B)(),[d,c]=(0,a.useState)(!1);return(0,f.jsx)(x.A,{visible:!!s,title:"Twilio",onCancel:t,footer:[(0,f.jsx)(l.A,{type:"primary",onClick:()=>n.submit(),loading:d,children:r("save")},"save-btn"),(0,f.jsx)(l.A,{type:"default",onClick:t,children:r("cancel")},"cancel-btn")],children:(0,f.jsx)(h.A,{form:n,layout:"vertical",onFinish:e=>{console.log("values => ",e),c(!0),m.update(s.id,e).then((()=>{t(),i()})).finally((()=>c(!1)))},initialValues:s,children:(0,f.jsxs)(A.A,{gutter:12,children:[(0,f.jsxs)(j.A,{span:24,children:[(0,f.jsx)(h.A.Item,{label:"Twilio phone number",name:"from",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{})}),(0,f.jsx)(h.A.Item,{label:"Messaging Service ID",name:"service_id",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{min:0,className:"w-100"})})]}),(0,f.jsx)(j.A,{span:24,children:(0,f.jsx)(h.A.Item,{label:"Account SID",name:"api_key",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{})})}),(0,f.jsx)(j.A,{span:24,children:(0,f.jsx)(h.A.Item,{label:"Auth Token",name:"secret_key",rules:[{required:!0,message:r("required")}],children:(0,f.jsx)(g.A,{})})}),(0,f.jsx)(j.A,{span:24,children:(0,f.jsx)(h.A.Item,{label:"OTP template",name:"text",rules:[{required:!0,message:r("required")},e=>{let{getFieldValue:s}=e;return{validator:()=>s("text").includes("#OTP#")?Promise.resolve():Promise.reject("#OTP# is required as your code will be placed here")}}],children:(0,f.jsx)(g.A,{})})})]})})})}var w=t(28645);function I(){const{t:e}=(0,v.B)(),[s,t]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[x,A]=(0,a.useState)(!1),[j,g]=(0,a.useState)([]),[p,I]=(0,a.useState)(null),{setIsModalVisible:q}=(0,a.useContext)(c.o),[k,C]=(0,a.useState)([{title:e("id"),is_show:!0,dataIndex:"id"},{title:e("title"),is_show:!0,dataIndex:"title"},{title:e("from"),is_show:!0,dataIndex:"from"},{title:e("type"),is_show:!0,dataIndex:"type"},{title:e("active"),is_show:!0,dataIndex:"active",key:"active",render:(e,s)=>(0,f.jsx)(i.A,{onChange:()=>{q(!0),t(s.id)},checked:e})},{title:e("options"),is_show:!0,dataIndex:"options",render:(e,s)=>(0,f.jsx)(l.A,{type:"primary",icon:(0,f.jsx)(d.A,{}),onClick:()=>I(s)})}]);function _(){A(!0),m.get().then((e=>g(e.data))).finally((()=>{A(!1)}))}(0,a.useEffect)((()=>{_()}),[]);return(0,f.jsxs)(n.A,{title:e("sms.gateway"),extra:(0,f.jsx)(w.A,{setColumns:C,columns:k}),children:[(0,f.jsx)(r.A,{columns:null===k||void 0===k?void 0:k.filter((e=>e.is_show)),rowKey:e=>e.id,dataSource:j,pagination:!1,loading:x}),(0,f.jsx)(o.A,{click:()=>{h(!0),m.setActive(s).then((()=>{_(),q(!1)})).finally((()=>h(!1)))},text:e("set.active.sms.gateway"),loading:u}),p&&"twilio"===p.type&&(0,f.jsx)(b,{modal:p,handleCancel:()=>I(null),refetch:_}),p&&"twilio"!==p.type&&(0,f.jsx)(y,{modal:p,handleCancel:()=>I(null),refetch:_})]})}},72906:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(89379),i=t(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};var n=t(25085),r=function(e,s){return i.createElement(n.A,(0,a.A)((0,a.A)({},e),{},{ref:s,icon:l}))};const d=i.forwardRef(r)}}]);