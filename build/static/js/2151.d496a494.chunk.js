(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2151],{4587:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var a=r(9950),l=r(20567),s=r(39452),o=r(94116),i=r(53439),n=r(44414);const d={position:"absolute",zIndex:"1"},c={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:r,width:u,height:h,xAxis:p,customOptions:v,card:x,type:g,extra:m,direction:f,bodyClass:y}=e,A=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return i.V3;case"bar":return i.ck;case"area":return i.cZ}})(g)));const j=window.innerWidth<768,_=(0,a.useRef)(null),b=(0,a.useRef)(),w=()=>{if(b.current){var e;const t=b.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight=`${j?0:null===(e=_.current)||void 0===e?void 0:e.offsetWidth}px`,"rtl"===f&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,a.useEffect)((()=>{w()}),[]),A.xaxis.categories=p,v&&(A={...A,...v});const C=()=>(0,n.jsx)(o.Ay,{onResize:void setTimeout((()=>{w()}),600),children:(0,n.jsx)("div",{style:"rtl"===f?{direction:"ltr"}:{},className:"chartRef",ref:b,children:(0,n.jsx)(s.A,{options:A,type:g,series:r,width:u,height:h})})});return(0,n.jsx)(n.Fragment,{children:x?(0,n.jsx)(l.A,{children:(0,n.jsxs)("div",{className:`position-relative ${y}`,children:[(0,n.jsx)("div",{style:j?{}:d,children:t})&&(0,n.jsx)("h4",{className:"font-weight-bold",style:j?{}:d,children:t}),m&&(0,n.jsx)("div",{ref:_,style:j?{}:c,children:m}),C()]})}):C()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const h=u},8297:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(9950),l=r(93124),s=r(41397),o=r(52786),i=r(44414);function n(e){let{handleChange:t,defaultValue:r,resetSearch:n,...d}=e;const[c,u]=(0,a.useState)(r),h=(0,a.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[]);return(0,a.useEffect)((()=>{u(r)}),[n]),(0,i.jsx)(l.A,{value:c,onChange:e=>{const{value:t}=e.target;u(t.replace(/\s/g,"")),h(t.replace(/\s/g,""))},prefix:(0,i.jsx)(o.A,{}),...d})}},11671:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var a=r(37437),l=r(87094),s=r(41988),o=r(80737),i=r(99674),n=r(59051),d=r.n(n),c=r(9950),u=r(91854),h=r(71795),p=r(99856),v=r(44414);const{RangePicker:x}=a.A,g=()=>{const e=(0,u.wA)(),{shopWithSeller:t}=(0,u.d4)((e=>e.shop),u.bN),{user:r}=(0,u.d4)((e=>e.auth),u.bN),{date_from:a,date_to:n,handleDateRange:g,filterOptions:m,setDateFrom:f,setDateTo:y,setSellers:A,setShops:j,sellers:_,shops:b}=(0,c.useContext)(h.M);return(0,c.useEffect)((()=>{null!==t&&void 0!==t&&t.shops.length&&null!==t&&void 0!==t&&t.seller.length||"seller"===r.role||e((0,p.zk)())}),[]),(0,v.jsx)(l.A,{gutter:24,className:"mb-3",children:(0,v.jsx)(s.A,{span:24,children:(0,v.jsxs)(o.A,{size:"large",children:[(0,v.jsx)(i.A,{value:`${a},${n}`,style:{width:150},placeholder:"Select date range",onChange:e=>{const t=e.split(",");f(t[0]),y(t[1])},options:m}),Boolean("admin"===r.role)&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(i.A,{showSearch:!0,style:{minWidth:150},mode:"multiple",defaultValue:b,placeholder:"Filter by shop",onChange:e=>{j(e)},options:(null===t||void 0===t?void 0:t.shops)||[],filterOption:(e,t)=>{var r;return(null!==(r=null===t||void 0===t?void 0:t.label)&&void 0!==r?r:"").includes(e)}})}),(0,v.jsx)(x,{defaultValue:[d()(a),d()(n)],onChange:g,disabledDate:e=>d()().add(0,"days")<=e})]})})})}},27109:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(89379),l=r(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var o=r(16233),i=function(e,t){return l.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};i.displayName="LineChartOutlined";const n=l.forwardRef(i)},28645:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var a=r(9950),l=r(30377),s=r(69216),o=r(80737),i=r(25933),n=r(57811),d=r(72906),c=r(70030),u=r(44414);const{Text:h}=l.A,p=e=>{let{columns:t=[],setColumns:r}=e;const{t:l}=(0,c.B)(),[p,v]=(0,a.useState)(!1),x=(0,u.jsx)(s.A,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,u.jsx)(s.A.Item,{children:(0,u.jsxs)(o.A,{className:"d-flex justify-content-between",children:[(0,u.jsx)(h,{children:e.title}),(0,u.jsx)(i.A,{defaultChecked:!0,onClick:()=>{!function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));r(a)}(e)}})]})},a)))});return(0,u.jsx)(n.A,{overlay:x,trigger:["click"],onVisibleChange:e=>{v(e)},visible:p,children:(0,u.jsx)(d.A,{style:{fontSize:"26px"}})})}},31397:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var a=r(30377),l=r(87094),s=r(41988),o=r(20567),i=r(80737),n=r(99674),d=r(40895),c=r(9950),u=r(27109),h=r(31598),p=r(4587),v=r(53439),x=r(70030),g=r(71795),m=r(44414);const{Title:f}=a.A,y=e=>{let{reportData:t={}}=e;const{by_time:r,options:a,handleByTime:y,chart_type:A,setChartType:j}=(0,c.useContext)(g.M),{t:_}=(0,x.B)(),b=(0,c.useMemo)((()=>{var e;return null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>e.time))}),[null===t||void 0===t?void 0:t.chart]),w=(0,c.useMemo)((()=>{var e;return Boolean(t.charts)?t.charts.map((e=>{var t;return{name:e.translation.title,data:null===(t=e.stocks)||void 0===t?void 0:t.map((e=>e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0))}})):[{name:_("orders"),data:null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10)))}]}),[null===t||void 0===t?void 0:t.chart]);return(0,m.jsx)(l.A,{gutter:24,children:(0,m.jsx)(s.A,{span:24,children:(0,m.jsxs)(o.A,{children:[(0,m.jsx)(l.A,{gutter:24,className:"w-100",children:(0,m.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,m.jsx)(i.A,{size:"large",className:"d-flex",children:(0,m.jsx)(f,{level:3,className:"mb-0",children:_("item.sold")})}),(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)(n.A,{style:{width:100},onChange:y,options:a,defaultValue:r}),(0,m.jsx)(d.A,{type:"vertical",style:{height:"100%"}}),(0,m.jsxs)(i.A,{children:[(0,m.jsx)(u.A,{style:{fontSize:"22px",cursor:"pointer",color:"area"===A?"green":""},onClick:()=>j("area")}),(0,m.jsx)(h.A,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===A?"green":""},onClick:()=>j("bar")})]})]})]})}),(0,m.jsx)(d.A,{}),(0,m.jsx)(p.A,{type:A,card:!1,series:w,xAxis:b,height:280,customOptions:{colors:[v.lm[1],v.lm[2],v.lm[3],v.lm[4],v.lm[5],v.lm[6],v.lm[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},40841:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(89379),l=r(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var o=r(16233),i=function(e,t){return l.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};i.displayName="CloudDownloadOutlined";const n=l.forwardRef(i)},42634:()=>{},49202:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var a=r(30377),l=r(90650),s=r(87094),o=r(41988),i=r(20567),n=r(80737),d=r(48538),c=r(3754),u=r(9950),h=r(8297),p=r(40841),v=r(19973),x=r(74623),g=r(91854),m=r(31397),f=r(71795),y=r(28645),A=r(769),j=r(88986),_=r(28429),b=r(42074),w=r(21215),C=r.n(w),k=r(74635),N=r(53774),S=r(11671),z=r(59051),q=r.n(z),I=r(44414);const{Text:M,Title:R}=a.A,B=()=>{var e,t,r;const w=(0,g.wA)(),z=(0,_.zy)(),B=(0,_.Zp)(),O=C().parse(z.search,[])["?category_id"],D=C().parse(z.search,[])["?product_id"],[E,F]=(0,u.useState)(),{date_from:T,date_to:V,by_time:$,chart:L,handleChart:H}=(0,u.useContext)(f.M),{activeMenu:P}=(0,g.d4)((e=>e.menu),g.bN),{loading:W,chartData:Y,productList:Z}=(0,g.d4)((e=>e.productReport),g.bN),[J,K]=(0,u.useState)([]),[G,Q]=(0,u.useState)(!1),[U,X]=(0,u.useState)(""),{defaultCurrency:ee}=(0,g.d4)((e=>e.currency),g.bN),[te,re]=(0,u.useState)([{title:(0,k.t)("product.title"),dataIndex:"product_title",key:"product_title",render:(e,t)=>(0,I.jsx)(b.N_,{to:`/report/products?product_id=${null===t||void 0===t?void 0:t.id}`,children:e}),is_show:!0,sorter:(e,t)=>{var r,a;return null===e||void 0===e||null===(r=e.translation)||void 0===r?void 0:r.title.localeCompare(null===t||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title)}},{title:(0,k.t)("bar.code"),dataIndex:"bar_code",key:"bar_code",is_show:!0,render:(e,t)=>(0,I.jsx)(I.Fragment,{children:(null===t||void 0===t?void 0:t.bar_code)||"-"})},{title:(0,k.t)("item.sold"),dataIndex:"quantity",key:"quantity",sorter:(e,t)=>e.quantity-t.quantity,is_show:!0},{title:(0,k.t)("net.sales"),dataIndex:"price",key:"price",is_show:!0,render:e=>(0,N.A)(e,ee.symbol),sorter:(e,t)=>e.price-t.price},{title:(0,k.t)("orders"),key:"count",dataIndex:"count",is_show:!0,sorter:(e,t)=>e.count-t.count},{title:(0,k.t)("category"),key:"category",dataIndex:"category",is_show:!0,render:(e,t)=>{var r,a,l;return(0,I.jsx)(b.N_,{to:`/report/products?category_id=${null===(r=t.category)||void 0===r?void 0:r.id}`,children:null===(a=t.category)||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title})}},{title:"deleted_at",key:"deleted_at",dataIndex:"deleted_at",is_show:!0,render:(e,t)=>(0,I.jsx)(I.Fragment,{children:e?q()(e).format("YYYY-MM-DD"):"-"})}]),ae=(0,u.useMemo)((()=>[{label:"item.sold",value:"quantity",qty:"quantity",price:!1},{label:"net.sales",value:"price",qty:"price",price:!0},{label:"orders",value:"count",qty:"count",price:!1}]),[]),le=()=>{const e={date_from:T,date_to:V,type:$,chart:L};O&&(e.category_id=O),D&&(e.productIds=[D]),ae.find((e=>e.value===L))&&w((0,A.gf)(e))},se=(e,t)=>{const r={date_from:T,date_to:V,type:$,page:e,perPage:t,search:U||null};O&&(r.category_id=O),D&&(r.productIds=[D]),E&&(r.shop_id=E),w((0,A.iE)(r))};(0,u.useEffect)((()=>{H(ae[0].value)}),[]),(0,u.useEffect)((()=>{P.refetch&&(se(),le(),w((0,x.km)(P)))}),[P.refetch]),(0,j.A)((()=>{se()}),[V,U,O,D,$,T,E]),(0,j.A)((()=>{le()}),[V,$,L,O,D,T]);const oe={selectedRowKeys:J,onChange:e=>{K(e)}},ie=null===te||void 0===te?void 0:te.filter((e=>e.is_show));return(0,I.jsxs)(l.A,{size:"large",spinning:W,children:[(0,I.jsx)(S.A,{}),(0,I.jsx)(s.A,{gutter:24,className:"report-products",children:null===ae||void 0===ae?void 0:ae.map((e=>(0,I.jsx)(o.A,{span:8,onClick:()=>H(e.value),children:(0,I.jsxs)(i.A,{className:L===e.value&&"active",children:[(0,I.jsx)(s.A,{className:"mb-5",children:(0,I.jsx)(o.A,{children:(0,I.jsx)(M,{children:(0,k.t)(e.label)})})}),(0,I.jsx)(s.A,{gutter:24,children:(0,I.jsx)(o.A,{span:12,children:(0,I.jsx)(R,{level:2,style:{whiteSpace:"nowrap"},children:null!==e&&void 0!==e&&e.price?(0,N.A)(Y[e.qty],ee.symbol):Y[e.qty]})})})]})},e.label)))}),(0,I.jsx)(m.A,{reportData:Y,chart_data:"quantities_sum"}),(0,I.jsxs)(i.A,{children:[(0,I.jsxs)(n.A,{className:"d-flex justify-content-between align-center",children:[(0,I.jsx)(a.A.Text,{strong:!0,level:3,children:(0,k.t)("products")}),(0,I.jsxs)(n.A,{className:"d-flex justify-content-between",children:[(0,I.jsx)(h.A,{style:{minWidth:"300px"},handleChange:e=>X(e)}),(0,I.jsx)(d.A,{color:"geekblue",onClick:()=>{w((0,A.lz)(J))},disabled:Boolean(!J.length),children:(0,k.t)("compare")}),(0,I.jsx)(d.A,{type:Boolean(J.length)||O||D||E?"primary":"default",danger:Boolean(J.length)||!!O||!!D||!!E,onClick:()=>{w((0,A.dS)()),F(void 0),K([]),se(),le(),B("/report/products")},children:(0,k.t)("clear")}),(0,I.jsx)(d.A,{icon:(0,I.jsx)(p.A,{}),loading:G,onClick:()=>{Q(!0),v.A.getReportProductList({date_from:T,date_to:V,type:$,export:"excel",category_id:O||null,productIds:D?[D]:null}).then((e=>{const t=e.data.link;t&&(window.location.href=t)})).finally((()=>Q(!1)))},children:(0,k.t)("download")}),(0,I.jsx)(y.A,{columns:te,setColumns:re})]})]}),(0,I.jsx)(c.A,{rowSelection:null!==ie&&void 0!==ie&&ie.length?oe:null,columns:ie,dataSource:null===(e=Z.data)||void 0===e?void 0:e.data,rowKey:e=>e.id,loading:W,pagination:{pageSize:10,page:(null===Z||void 0===Z||null===(t=Z.data)||void 0===t?void 0:t.meta.page)||1,total:null===Z||void 0===Z||null===(r=Z.data)||void 0===r?void 0:r.meta.total,defaultCurrent:1},onChange:e=>{const{pageSize:t,current:r}=e;se(r,t)},scroll:{x:1500}})]})]})}},53439:(e,t,r)=>{"use strict";r.d(t,{V3:()=>l,cZ:()=>s,ck:()=>o,lm:()=>a});const a=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],l={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...a],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},s={...l},o={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...a],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>`${e}`}}}},53774:(e,t,r)=>{"use strict";function a(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}r.d(t,{A:()=>a})},72906:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(89379),l=r(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};var o=r(16233),i=function(e,t){return l.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};i.displayName="MoreOutlined";const n=l.forwardRef(i)}}]);