"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2031],{4587:(e,t,s)=>{s.d(t,{A:()=>h});var l=s(9950),a=s(20567),r=s(39452),o=s(94116),n=s(53439),i=s(44414);const d={position:"absolute",zIndex:"1"},c={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:s,width:u,height:h,xAxis:m,customOptions:p,card:x,type:v,extra:_,direction:y,bodyClass:g}=e,f=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return n.V3;case"bar":return n.ck;case"area":return n.cZ}})(v)));const A=window.innerWidth<768,b=(0,l.useRef)(null),j=(0,l.useRef)(),w=()=>{if(j.current){var e;const t=j.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight=`${A?0:null===(e=b.current)||void 0===e?void 0:e.offsetWidth}px`,"rtl"===y&&(t.style.right="auto",t.style.left="0"),A&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,l.useEffect)((()=>{w()}),[]),f.xaxis.categories=m,p&&(f={...f,...p});const C=()=>(0,i.jsx)(o.Ay,{onResize:void setTimeout((()=>{w()}),600),children:(0,i.jsx)("div",{style:"rtl"===y?{direction:"ltr"}:{},className:"chartRef",ref:j,children:(0,i.jsx)(r.A,{options:f,type:v,series:s,width:u,height:h})})});return(0,i.jsx)(i.Fragment,{children:x?(0,i.jsx)(a.A,{children:(0,i.jsxs)("div",{className:`position-relative ${g}`,children:[(0,i.jsx)("div",{style:A?{}:d,children:t})&&(0,i.jsx)("h4",{className:"font-weight-bold",style:A?{}:d,children:t}),_&&(0,i.jsx)("div",{ref:b,style:A?{}:c,children:_}),C()]})}):C()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const h=u},11671:(e,t,s)=>{s.d(t,{A:()=>v});var l=s(37437),a=s(87094),r=s(41988),o=s(80737),n=s(99674),i=s(59051),d=s.n(i),c=s(9950),u=s(91854),h=s(71795),m=s(99856),p=s(44414);const{RangePicker:x}=l.A,v=()=>{const e=(0,u.wA)(),{shopWithSeller:t}=(0,u.d4)((e=>e.shop),u.bN),{user:s}=(0,u.d4)((e=>e.auth),u.bN),{date_from:l,date_to:i,handleDateRange:v,filterOptions:_,setDateFrom:y,setDateTo:g,setSellers:f,setShops:A,sellers:b,shops:j}=(0,c.useContext)(h.M);return(0,c.useEffect)((()=>{null!==t&&void 0!==t&&t.shops.length&&null!==t&&void 0!==t&&t.seller.length||"seller"===s.role||e((0,m.zk)())}),[]),(0,p.jsx)(a.A,{gutter:24,className:"mb-3",children:(0,p.jsx)(r.A,{span:24,children:(0,p.jsxs)(o.A,{size:"large",children:[(0,p.jsx)(n.A,{value:`${l},${i}`,style:{width:150},placeholder:"Select date range",onChange:e=>{const t=e.split(",");y(t[0]),g(t[1])},options:_}),Boolean("admin"===s.role)&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n.A,{showSearch:!0,style:{minWidth:150},mode:"multiple",defaultValue:j,placeholder:"Filter by shop",onChange:e=>{A(e)},options:(null===t||void 0===t?void 0:t.shops)||[],filterOption:(e,t)=>{var s;return(null!==(s=null===t||void 0===t?void 0:t.label)&&void 0!==s?s:"").includes(e)}})}),(0,p.jsx)(x,{defaultValue:[d()(l),d()(i)],onChange:v,disabledDate:e=>d()().add(0,"days")<=e})]})})})}},27109:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(89379),a=s(9950);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var o=s(16233),n=function(e,t){return a.createElement(o.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:r}))};n.displayName="LineChartOutlined";const i=a.forwardRef(n)},28645:(e,t,s)=>{s.d(t,{A:()=>m});var l=s(9950),a=s(30377),r=s(69216),o=s(80737),n=s(25933),i=s(57811),d=s(72906),c=s(70030),u=s(44414);const{Text:h}=a.A,m=e=>{let{columns:t=[],setColumns:s}=e;const{t:a}=(0,c.B)(),[m,p]=(0,l.useState)(!1),x=(0,u.jsx)(r.A,{children:null===t||void 0===t?void 0:t.map(((e,l)=>(0,u.jsx)(r.A.Item,{children:(0,u.jsxs)(o.A,{className:"d-flex justify-content-between",children:[(0,u.jsx)(h,{children:e.title}),(0,u.jsx)(n.A,{defaultChecked:!0,onClick:()=>{!function(e){const l=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));s(l)}(e)}})]})},l)))});return(0,u.jsx)(i.A,{overlay:x,trigger:["click"],onVisibleChange:e=>{p(e)},visible:m,children:(0,u.jsx)(d.A,{style:{fontSize:"26px"}})})}},31397:(e,t,s)=>{s.d(t,{A:()=>g});var l=s(30377),a=s(87094),r=s(41988),o=s(20567),n=s(80737),i=s(99674),d=s(40895),c=s(9950),u=s(27109),h=s(31598),m=s(4587),p=s(53439),x=s(70030),v=s(71795),_=s(44414);const{Title:y}=l.A,g=e=>{let{reportData:t={}}=e;const{by_time:s,options:l,handleByTime:g,chart_type:f,setChartType:A}=(0,c.useContext)(v.M),{t:b}=(0,x.B)(),j=(0,c.useMemo)((()=>{var e;return null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>e.time))}),[null===t||void 0===t?void 0:t.chart]),w=(0,c.useMemo)((()=>{var e;return Boolean(t.charts)?t.charts.map((e=>{var t;return{name:e.translation.title,data:null===(t=e.stocks)||void 0===t?void 0:t.map((e=>e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0))}})):[{name:b("orders"),data:null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10)))}]}),[null===t||void 0===t?void 0:t.chart]);return(0,_.jsx)(a.A,{gutter:24,children:(0,_.jsx)(r.A,{span:24,children:(0,_.jsxs)(o.A,{children:[(0,_.jsx)(a.A,{gutter:24,className:"w-100",children:(0,_.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,_.jsx)(n.A,{size:"large",className:"d-flex",children:(0,_.jsx)(y,{level:3,className:"mb-0",children:b("item.sold")})}),(0,_.jsxs)("div",{className:"d-flex",children:[(0,_.jsx)(i.A,{style:{width:100},onChange:g,options:l,defaultValue:s}),(0,_.jsx)(d.A,{type:"vertical",style:{height:"100%"}}),(0,_.jsxs)(n.A,{children:[(0,_.jsx)(u.A,{style:{fontSize:"22px",cursor:"pointer",color:"area"===f?"green":""},onClick:()=>A("area")}),(0,_.jsx)(h.A,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===f?"green":""},onClick:()=>A("bar")})]})]})]})}),(0,_.jsx)(d.A,{}),(0,_.jsx)(m.A,{type:f,card:!1,series:w,xAxis:j,height:280,customOptions:{colors:[p.lm[1],p.lm[2],p.lm[3],p.lm[4],p.lm[5],p.lm[6],p.lm[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},40841:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(89379),a=s(9950);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var o=s(16233),n=function(e,t){return a.createElement(o.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:r}))};n.displayName="CloudDownloadOutlined";const i=a.forwardRef(n)},53439:(e,t,s)=>{s.d(t,{V3:()=>a,cZ:()=>r,ck:()=>o,lm:()=>l});const l=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],a={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...l],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},r={...a},o={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...l],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>`${e}`}}}},72906:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(89379),a=s(9950);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};var o=s(16233),n=function(e,t){return a.createElement(o.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:r}))};n.displayName="MoreOutlined";const i=a.forwardRef(n)},82031:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var l=s(30377),a=s(90650),r=s(87094),o=s(41988),n=s(20567),i=s(80737),d=s(48538),c=s(3754),u=s(9950),h=s(40841),m=s(19973),p=s(74623),x=s(91854),v=s(31397),_=s(71795),y=s(28645),g=s(88986),f=s(11671);var A=s(49636),b=s(74635),j=s(44414);const{Text:w,Title:C}=l.A,k=()=>{const e=(0,x.wA)(),[t,s]=(0,u.useState)("items_sold"),{date_from:l,date_to:k,by_time:S,sellers:N,shops:z}=(0,u.useContext)(_.M),{activeMenu:I}=(0,x.d4)((e=>e.menu),x.bN),{loading:P,chartData:q,productList:O,error:M}=(0,x.d4)((e=>e.productShops),x.bN),[E,R]=(0,u.useState)([]),[T,D]=(0,u.useState)(!1),[$,B]=(0,u.useState)([{title:"Shop",dataIndex:"shop_translation_title",key:"shop_translation_title",is_show:!0},{title:"Seller",dataIndex:"seller_lastname",key:"seller_lastname",render:(e,t)=>`${(null===t||void 0===t?void 0:t.seller_firstname)||"-"} ${(null===t||void 0===t?void 0:t.seller_lastname)||"-"}`,is_show:!0},{title:"completed orders count",dataIndex:"completed_orders_count",key:"completed_orders_count",is_show:!0},{title:"completed orders price sum",dataIndex:"completed_orders_price_sum",key:"completed_orders_price_sum",is_show:!0},{title:"canceled orders count",dataIndex:"canceled_orders_count",key:"canceled_orders_count",is_show:!0},{title:"canceled orders price sum",dataIndex:"canceled_orders_price_sum",key:"canceled_orders_price_sum",is_show:!0},{title:"items sold",dataIndex:"items_sold",key:"items_sold",is_show:!0},{title:"net sales",dataIndex:"net_sales",key:"net_sales",is_show:!0},{title:"products count",dataIndex:"products_count",key:"products_count",is_show:!0},{title:"tax earned",dataIndex:"tax_earned",key:"tax_earned",is_show:!0},{title:"total earned",dataIndex:"total_earned",key:"total_earned",is_show:!0},{title:"commission earned",dataIndex:"commission_earned",key:"commission_earned",is_show:!0},{title:"delivery earned",dataIndex:"delivery_earned",key:"delivery_earned",is_show:!0}]),V=[{value:"shops_count",label:"Shops Count",qty:"shopsCount",isPrice:!1},{value:"products_count",label:"Products Count",qty:"productsCount",isPrice:!1},{value:"completed_orders_count",label:"Completed Orders Count",qty:"completedOrdersCount",isPrice:!1},{value:"completed_orders_price_sum",label:"Completed Orders Price Sum",qty:"completedOrdersPriceSum",isPrice:!0},{value:"canceled_orders_count",label:"Completed Orders Count",qty:"completedOrdersCount",isPrice:!1},{value:"canceled_orders_price_sum",label:"Canceled Orders Price Sum",qty:"canceledOrdersPriceSum",isPrice:!0},{value:"items_sold",label:"Items Sold",qty:"itemsSold",isPrice:!1},{value:"net_sales",label:"Net Sales",qty:"netSales",isPrice:!0},{value:"total_earned",label:"Total Earned",qty:"totalEarned",isPrice:!0},{value:"delivery_earned",label:"Delivery Earned",qty:"deliveryEarned",isPrice:!0},{value:"tax_earned",label:"Tax Earned",qty:"taxEarned",isPrice:!0}],L=()=>{const s={date_from:l,date_to:k,by_time:S,chart:t,sellers:N,shops:z};e((0,A.vV)(s))},F=(t,s)=>{const a={date_from:l,date_to:k,by_time:S,page:t,perPage:s,sellers:N,shops:z};e((0,A.JT)(a))};(0,u.useEffect)((()=>{I.refetch&&(F(),L(),e((0,p.km)(I)))}),[I.refetch]),(0,g.A)((()=>{F()}),[k,N,z]),(0,g.A)((()=>{L()}),[k,S,t,N,z]);const H={selectedRowKeys:E,onChange:e=>{R(e)}},W=null===$||void 0===$?void 0:$.filter((e=>e.is_show));return(0,j.jsxs)(a.A,{size:"large",spinning:P,children:[(0,j.jsx)(f.A,{}),(0,j.jsx)(r.A,{gutter:24,className:"report-products",children:null===V||void 0===V?void 0:V.map((e=>{var l,a,i,d;return(0,j.jsx)(o.A,{span:6,onClick:()=>s(e.value),children:(0,j.jsxs)(n.A,{className:t===e.value&&"active",children:[(0,j.jsx)(r.A,{className:"mb-5",children:(0,j.jsx)(o.A,{children:(0,j.jsx)(w,{children:(0,b.t)(e.label)})})}),(0,j.jsx)(r.A,{gutter:24,children:(0,j.jsx)(o.A,{span:12,children:(0,j.jsx)(C,{level:2,style:{whiteSpace:"nowrap"},children:(a=null===q||void 0===q||null===(l=q.defaultCurrency)||void 0===l?void 0:l.symbol,i=q[e.qty],d=e.isPrice,d&&i?`${a||"$"} ${i}`:i||"")})})})]})},e.label)}))}),(0,j.jsx)(v.A,{reportData:q,chart_data:"quantities_sum"}),(0,j.jsxs)(n.A,{children:[(0,j.jsxs)(r.A,{gutter:24,className:"align-items-center justify-content-between mb-4",children:[(0,j.jsx)(o.A,{span:3,children:(0,j.jsx)(C,{level:2,className:"mb-0",children:(0,b.t)("Products")})}),(0,j.jsx)(o.A,{span:6,className:"d-flex justify-content-end",children:(0,j.jsxs)(i.A,{children:[(0,j.jsx)(d.A,{color:"geekblue",onClick:()=>{const s={date_from:l,date_to:k,by_time:S,chart:t,ids:E,sellers:N,shops:z};e((0,A.yU)(s))},disabled:Boolean(!E.length),children:(0,b.t)("Compare")}),(0,j.jsx)(d.A,{onClick:()=>{R([]),F(),L()},children:(0,b.t)("Clear")}),(0,j.jsx)(d.A,{icon:(0,j.jsx)(h.A,{}),loading:T,onClick:()=>{D(!0),m.A.getShopsProducts({date_from:l,date_to:k,by_time:S,export:"excel"}).then((e=>{const t=e.data.link;window.location.href=t})).finally((()=>D(!1)))},children:(0,b.t)("Download")}),(0,j.jsx)(y.A,{columns:$,setColumns:B})]})})]}),(0,j.jsx)(c.A,{rowSelection:null!==W&&void 0!==W&&W.length?H:null,columns:W,dataSource:O.data||[],rowKey:e=>e.id,loading:P,pagination:{pageSize:null===O||void 0===O?void 0:O.per_page,page:(null===O||void 0===O?void 0:O.current_page)||1,total:null===O||void 0===O?void 0:O.total,defaultCurrent:1},onChange:e=>{const{pageSize:t,current:s}=e;F(s,t)},scroll:{x:1500}})]})]})}}}]);