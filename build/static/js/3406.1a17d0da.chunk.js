"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[3406],{53406:(e,d,t)=>{t.r(d),t.d(d,{default:()=>E});var a=t(9950),l=t(33022),i=t(62863),n=t(12916),s=t(48538),o=t(80737),r=t(20567),u=t(73092),c=t(28429),v=t(24513),h=t(12678),m=t(44070),x=t(98114),p=t(91854),y=t(74623),j=t(70030),g=t(88986),A=t(53177),_=t(8168),f=t(8297),k=t(53774),w=t(56592),C=t(23283),b=t(28645),S=t(39174),M=t(38635),Y=t(26714),I=t(49348),P=t(35116),D=t(23758),N=t(55386),O=t(76083),$=t(63620),R=t(81446),G=t(69091),K=t(59051),z=t.n(K),T=t(44414);const{RangePicker:V}=l.A,{TabPane:B}=i.A;function E(){var e,d;const t=(0,p.wA)(),l=(0,c.Zp)(),{t:K}=(0,j.B)(),{defaultCurrency:E}=(0,p.d4)((e=>e.currency),p.bN),[X,Z]=(0,a.useState)(null),[q,F]=(0,a.useState)(null),[H,J]=(0,a.useState)(null),[L,Q]=(0,a.useState)(null),{id:U}=(0,c.g)(),W=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[ee,de]=(0,a.useState)([{title:K("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:K("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,T.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:K("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,T.jsxs)("div",{className:"text-lowercase",children:[e||0," ",K("products")]})},{title:K("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,d)=>(0,T.jsxs)("div",{children:["new"===e?(0,T.jsx)(n.A,{color:"blue",children:K(e)}):"canceled"===e?(0,T.jsx)(n.A,{color:"error",children:K(e)}):(0,T.jsx)(n.A,{color:"cyan",children:K(e)}),"delivered"!==e&&"canceled"!==e?(0,T.jsx)(v.A,{onClick:()=>Z(d)}):""]})},{title:K("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,d)=>(0,T.jsx)("div",{children:"ready"===d.status&&"pickup"!==d.delivery_type?(0,T.jsx)(s.A,{type:"link",onClick:()=>Q(d),children:(0,T.jsxs)(o.A,{children:[e?`${e.firstname} ${e.lastname}`:K("add.deliveryman"),(0,T.jsx)(v.A,{})]})}):(0,T.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:K("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,k.A)(e,E.symbol)},{title:K("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var d,t;return K(null===e||void 0===e||null===(d=e.payment_system)||void 0===d||null===(t=d.payment)||void 0===t?void 0:t.tag)||"-"}},{title:K("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:K("options"),is_show:!0,key:"options",render:(e,d)=>(0,T.jsxs)(o.A,{children:[(0,T.jsx)(s.A,{icon:(0,T.jsx)(S.kMs,{}),onClick:()=>F(d.id)}),(0,T.jsx)(s.A,{icon:(0,T.jsx)(h.A,{}),onClick:()=>(e=>{t((0,y.X4)({url:`order/details/${e.id}`,id:"order_details",name:K("order.details")})),l(`/order/details/${e.id}`)})(d)}),(0,T.jsx)(P.A,{icon:(0,T.jsx)(m.A,{}),onClick:()=>{se([d.id]),te(!0),re(!0)}}),(0,T.jsx)(s.A,{icon:(0,T.jsx)(x.A,{}),onClick:()=>J(d.id)})]})}]),{setIsModalVisible:te}=(0,a.useContext)(N.o),[ae,le]=(0,a.useState)(!1),{activeMenu:ie}=(0,p.d4)((e=>e.menu),p.bN),[ne,se]=(0,a.useState)(null),[oe,re]=(0,a.useState)(null),[ue,ce]=(0,a.useState)(!1),{orders:ve,meta:he,loading:me,params:xe,statistic:pe}=(0,p.d4)((e=>e.orders),p.bN),ye=null===ie||void 0===ie?void 0:ie.data;(0,g.A)((()=>{const e={search:null===ye||void 0===ye?void 0:ye.search,sort:null===ye||void 0===ye?void 0:ye.sort,column:null===ye||void 0===ye?void 0:ye.column,perPage:null===ye||void 0===ye?void 0:ye.perPage,page:null===ye||void 0===ye?void 0:ye.page,deliveryman:U,date_from:null===ye||void 0===ye?void 0:ye.date_from,date_to:null===ye||void 0===ye?void 0:ye.date_to,status:"deliveryman.attached"===(null===ye||void 0===ye?void 0:ye.status)||null===ye||void 0===ye?void 0:ye.status,"isset-deliveryman":"deliveryman.attached"===(null===ye||void 0===ye?void 0:ye.status)?1:0};t((0,A.Gb)(e))}),[null===ie||void 0===ie?void 0:ie.data]);const je=()=>{Z(null),Q(null),F(null),J(null)};(0,a.useEffect)((()=>{if(null!==ie&&void 0!==ie&&ie.refetch){const e={status:null===ye||void 0===ye?void 0:ye.status,page:null===ye||void 0===ye?void 0:ye.page,perPage:10,type:"delivery",deliveryman:U};t((0,A.Gb)(e)),t((0,y.km)(ie))}}),[null===ie||void 0===ie?void 0:ie.refetch]);const ge={selectedRowKeys:ne,onChange:e=>{se(e)}};return(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{children:me?(0,T.jsx)(R.A,{}):(0,T.jsx)(G.A,{data:pe})}),(0,T.jsxs)(r.A,{title:K("orders"),extra:(0,T.jsxs)(o.A,{wrap:!0,children:[(0,T.jsx)(V,{format:"YYYY-MM-DD",onChange:e=>{return d=e,void t((0,y.Ok)({activeMenu:ie,data:{...ye,date_from:d?z()(null===d||void 0===d?void 0:d[0]).format("YYYY-MM-DD").toString():void 0,date_to:d?z()(null===d||void 0===d?void 0:d[1]).format("YYYY-MM-DD").toString():void 0}}));var d}}),(0,T.jsx)(P.A,{type:"danger",onClick:()=>{null===ne||0===ne.length?I.oR.warning(K("select.the.product")):(te(!0),re(!1))},children:K("delete.all")}),(0,T.jsx)(s.A,{onClick:()=>{le(!0);const e={search:null===ye||void 0===ye?void 0:ye.search,sort:null===ye||void 0===ye?void 0:ye.sort,column:null===ye||void 0===ye?void 0:ye.column,perPage:null===ye||void 0===ye?void 0:ye.perPage,page:null===ye||void 0===ye?void 0:ye.page,deliveryman:U,date_from:null===ye||void 0===ye?void 0:ye.date_from,date_to:null===ye||void 0===ye?void 0:ye.date_to,status:"deliveryman.attached"===(null===ye||void 0===ye?void 0:ye.status)||null===ye||void 0===ye?void 0:ye.status,"isset-deliveryman":"deliveryman.attached"===(null===ye||void 0===ye?void 0:ye.status)?1:0};D.A.export(e).then((e=>{const d=$.bb+e.data.file_name;window.location.href=d})).finally((()=>le(!1)))},loading:ae,children:K("export")}),(0,T.jsx)(b.A,{setColumns:de,columns:ee})]}),children:[(0,T.jsx)("div",{className:"mt-2 mb-4",children:(0,T.jsx)(f.A,{placeholder:K("search"),width:480,handleChange:e=>{return d=e,a="search",void t((0,y.Ok)({activeMenu:ie,data:{...ye,[a]:d}}));var d,a},defaultValue:null===(e=ie.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(d=ie.data)&&void 0!==d&&d.search)})}),(0,T.jsx)(i.A,{onChange:e=>{const d=e;t((0,y.Ok)({activeMenu:ie,data:{status:d}}))},type:"card",activeKey:null===ye||void 0===ye?void 0:ye.status,children:W.map((e=>(0,T.jsx)(B,{tab:K(e.name)},e.name)))}),(0,T.jsx)(u.A,{scroll:{x:1024},rowSelection:ge,columns:null===ee||void 0===ee?void 0:ee.filter((e=>e.is_show)),dataSource:ve,loading:me,pagination:{pageSize:xe.perPage,page:xe.page,total:he.total,defaultCurrent:xe.page},rowKey:e=>e.id,onChange:function(e,d,a){const{pageSize:l,current:i}=e,{field:n,order:s}=a,o=(0,_.A)(s);t((0,y.Ok)({activeMenu:ie,data:{...ie.data,perPage:l,page:i,column:n,sort:o}}))}}),X&&(0,T.jsx)(w.A,{orderDetails:X,handleCancel:je,status:W}),L&&(0,T.jsx)(C.A,{orderDetails:L,handleCancel:je}),q&&(0,T.jsx)(M.A,{id:q,handleCancel:je}),H&&(0,T.jsx)(Y.A,{id:H,handleCancel:je}),(0,T.jsx)(O.A,{click:()=>{ce(!0);const e={...Object.assign({},...ne.map(((e,d)=>({[`ids[${d}]`]:e}))))};D.A.delete(e).then((()=>{I.oR.success(K("successfully.deleted")),te(!1),t((0,A.Gb)()),re(null)})).finally((()=>ce(!1)))},text:K(oe?"delete":"all.delete"),loading:ue,setText:se})]})]})}}}]);