"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7852],{33507:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var i=a(9950),n=(a(82450),a(49326)),s=a(45359),r=a(20567),d=a(90650),l=a(52770),c=a(57844),o=a(71999),u=a(28429),p=a(47933),m=a(91854),h=a(74623),f=a(63620),A=a(70030),g=a(65820),v=a(92808),x=a(44414);const{Step:j}=s.A,y=()=>{var e;const{t:t}=(0,A.B)(),{uuid:a}=(0,u.g)(),y=(0,g.s)(),{activeMenu:b}=(0,m.d4)((e=>e.menu),m.bN),{languages:k}=(0,m.d4)((e=>e.formLang),m.bN),q=(0,m.wA)(),w=Number((null===(e=y.values)||void 0===e?void 0:e.step)||0),[_,C]=(0,i.useState)(b.refetch),N=()=>{const e=w+1;y.set("step",e)},$=()=>{const e=w-1;y.set("step",e)},I=e=>e?{label:e.translation?e.translation.title:e.title,value:e.id}:null;function M(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,a=k.map((e=>{var a,i;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.description}}));return Object.assign({},...a)}(0,i.useEffect)((()=>{b.refetch&&function(e){C(!0),p.A.getById(e).then((e=>{const t={...e.data,...M(e.data),shop:I(e.data.shop),category:I(e.data.category),brand:I(e.data.brand),unit:I(e.data.unit),images:(a=e.data.galleries,a.map((e=>({uid:e.id,name:e.path,url:f.sE+e.path})))),properties:e.data.properties.map(((e,t)=>({id:t,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};var a;q((0,h.Ok)({activeMenu:b,data:t}))})).finally((()=>{C(!1),q((0,h.km)(b))}))}(a)}),[b.refetch]);return(0,x.jsxs)(r.A,{title:t("edit.gift.card"),extra:(0,x.jsx)(o.A,{}),children:[(0,x.jsx)(s.A,{current:w,onChange:e=>{q((0,h.Ok)({activeMenu:b,data:{...b.data,step:e}})),y.set("step",e)},children:n.C.map((e=>(0,x.jsx)(j,{title:t(e.title)},e.title)))}),_?(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,x.jsx)(d.A,{size:"large",className:"py-5"})}):(0,x.jsxs)("div",{className:"steps-content",children:["First-content"===n.C[w].content&&(0,x.jsx)(v.A,{next:N,action_type:"edit"}),(0,x.jsx)("div",{style:{display:"Second-content"===n.C[w].content?"block":"none"},children:(0,x.jsx)(l.A,{next:N,prev:$})}),"Third-content"===n.C[w].content&&(0,x.jsx)(c.A,{prev:$,isGiftCard:!0})]})]})}},78433:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(89379),n=a(9950),s=a(18042),r=a(16233),d=function(e,t){return n.createElement(r.A,(0,i.A)((0,i.A)({},e),{},{ref:t,icon:s.A}))};d.displayName="DeleteOutlined";const l=n.forwardRef(d)},92808:(e,t,a)=>{a.d(t,{A:()=>v});var i=a(9950),n=a(25887),s=a(87094),r=a(41988),d=a(93124),l=a(48538),c=a(98591),o=a(91854),u=a(47933),p=a(74623),m=a(28429),h=a(70030),f=a(31281),A=a(2777),g=a(44414);const v=e=>{var t;let{next:a,action_type:v=""}=e;const{t:x}=(0,h.B)(),[j]=n.A.useForm(),y=(0,o.wA)(),b=(0,m.Zp)(),[k,q]=(0,i.useState)(null),{activeMenu:w}=(0,o.d4)((e=>e.menu),o.bN),{defaultLang:_,languages:C}=(0,o.d4)((e=>e.formLang),o.bN),[N,$]=(0,i.useState)((null===(t=w.data)||void 0===t?void 0:t.images)||[]),[I,M]=(0,i.useState)(!1);(0,i.useEffect)((()=>()=>{const e=j.getFieldsValue(!0);y((0,p.Ok)({activeMenu:w,data:{...w.data,...e}}))}),[]);return(0,g.jsxs)(n.A,{layout:"vertical",form:j,initialValues:{active:!0,...w.data},onFinish:e=>{M(!0);const t={title:(0,f.A)(C,e,"title"),description:(0,f.A)(C,e,"description"),keywords:e.keywords,qr_code:e.qr_code,images:[...N.flatMap((e=>e.name))],gift:1};"edit"===v?function(e,t){const i=w.data.id;u.A.update(i,t).then((t=>{let{data:i}=t;y((0,p.Ok)({activeMenu:w,data:e})),a()})).catch((e=>q(e.response.data.params))).finally((()=>M(!1)))}(e,t):function(e,t){u.A.create(t).then((t=>{let{data:a}=t;y((0,p.W6)({id:`gift-card-${a.uuid}`,url:`gift-card/${a.uuid}`,name:x("add.gift.card"),data:{...e,id:a.id},refetch:!1}),(0,p.Ok)({activeMenu:w,data:{id:a.id}})),b(`/gift-card/${a.uuid}?step=1`)})).catch((e=>q(e.response.data.params))).finally((()=>M(!1)))}(e,t)},children:[(0,g.jsxs)(s.A,{gutter:12,children:[(0,g.jsx)(r.A,{span:12,children:C.map((e=>(0,g.jsx)(n.A.Item,{label:x("name"),name:`title[${e.locale}]`,rules:[{required:e.locale===_,message:x("required")}],hidden:e.locale!==_,children:(0,g.jsx)(d.A,{})},"name"+e.id)))}),(0,g.jsx)(r.A,{span:12,children:C.map((e=>(0,g.jsx)(n.A.Item,{label:x("description"),name:`description[${e.locale}]`,rules:[{required:e.locale===_,message:x("required")}],hidden:e.locale!==_,children:(0,g.jsx)(c.A,{rows:3})},"description"+e.id)))}),(0,g.jsx)(r.A,{span:12,children:(0,g.jsx)(n.A.Item,{label:x("qr.code"),name:"qr_code",rules:[{required:!0,message:x("required"),error:"error"}],help:null!==k&&void 0!==k&&k.qr_code?k.qr_code[0]:null,validateStatus:null!==k&&void 0!==k&&k.qr_code?"error":"success",children:(0,g.jsx)(d.A,{})})}),(0,g.jsx)(r.A,{span:12,children:(0,g.jsx)(n.A.Item,{label:x("keywords"),name:"keywords",rules:[{required:!0,message:x("required")}],children:(0,g.jsx)(d.A,{})})}),(0,g.jsx)(r.A,{span:24,children:(0,g.jsx)(n.A.Item,{label:x("images"),name:"images",rules:[{required:!0,message:x("required")}],children:(0,g.jsx)(A.A,{type:"products",GiftCardsIndex:!0,imageList:N,setImageList:$,form:j})})})]}),(0,g.jsx)(l.A,{type:"primary",htmlType:"submit",loading:I,children:x("next")})]})}}}]);