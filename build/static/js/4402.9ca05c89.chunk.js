"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4402],{14402:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var l=a(9950),n=a(45359),i=a(20567),s=a(71999),r=a(26405),d=a(25887),u=a(87094),o=a(41988),c=a(93124),m=a(99674),h=a(40202),v=a(25933),x=a(48538),A=a(98591),p=a(91854),j=a(70030),g=a(58381),q=a(74623),b=a(12598),y=a(31281),f=a(67231),I=a(82371);const _={getAll:e=>I.A.get("dashboard/seller/units/paginate",{params:e}),getById:(e,t)=>I.A.get(`dashboard/seller/units/${e}`,{params:t})};var w=a(47992),S=a(27276),k=a(2777),C=a(44414);function N(e){var t,a,n;let{next:i,setUuid:s}=e;const{t:r}=(0,j.B)(),[I]=d.A.useForm(),N=(0,p.wA)(),{activeMenu:F}=(0,p.d4)((e=>e.menu),p.bN),[O,M]=(0,l.useState)(null),{defaultLang:L,languages:V}=(0,p.d4)((e=>e.formLang),p.bN),[B,E]=(0,l.useState)((null===(t=F.data)||void 0===t?void 0:t.images)||[]),[P,T]=(0,l.useState)(!1),[$,z]=(0,l.useState)([]);(0,l.useEffect)((()=>()=>{const e=I.getFieldsValue(!0);N((0,q.Ok)({activeMenu:F,data:{...F.data,...e}}))}),[]);return(0,l.useEffect)((()=>{_.getAll({perPage:100,page:1,active:1}).then((e=>{let{data:t}=e;return z(function(e){return e.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}(t))}))}),[]),console.log("activeMenu.data",F),(0,C.jsxs)(d.A,{layout:"vertical",form:I,initialValues:{active:!0,...F.data},onFinish:e=>{T(!0);const t={category_id:e.category.value,brand_id:e.brand.value,unit_id:e.unit.value,title:(0,y.A)(V,e,"title"),description:(0,y.A)(V,e,"description"),images:[...B.flatMap((e=>e.name))],active:e.active,keywords:e.keywords,max_qty:e.max_qty,min_qty:e.min_qty,price:e.price,qr_code:e.qr_code,quantity:e.quantity,tax:e.tax};f.A.newCreate(t).then((e=>{i(),s(e.data.uuid)})).catch((e=>M(e.response.data.params))).finally((()=>T(!1)))},children:[(0,C.jsxs)(u.A,{gutter:12,children:[(0,C.jsx)(o.A,{span:12,children:V.map((e=>(0,C.jsx)(d.A.Item,{label:r("name"),name:`title[${e.locale}]`,rules:[{required:e.locale===L,message:r("required")}],hidden:e.locale!==L,children:(0,C.jsx)(c.A,{})},"name"+e.id)))}),(0,C.jsx)(o.A,{span:12,children:V.map((e=>(0,C.jsx)(d.A.Item,{label:r("description"),name:`description[${e.locale}]`,rules:[{required:e.locale===L,message:r("required")}],hidden:e.locale!==L,children:(0,C.jsx)(A.A,{rows:3})},"description"+e.id)))}),(0,C.jsx)(o.A,{span:12,children:(0,C.jsx)(d.A.Item,{label:r("brand"),name:"brand",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(w.G,{fetchOptions:async function(e){return g.A.getAll(e).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.brand.title,value:null===e||void 0===e?void 0:e.brand.id})))))}})})}),(0,C.jsx)(o.A,{span:12,children:(0,C.jsx)(d.A.Item,{label:r("category"),name:"category",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(S.v,{fetchOptions:async function(){return b.A.getAll({perPage:100}).then((e=>e.data.map((e=>{var t,a,l,n,i,s;return{title:null===e||void 0===e||null===(t=e.category)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,value:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.id,key:null===e||void 0===e||null===(n=e.category)||void 0===n?void 0:n.id,disabled:!0,children:null===e||void 0===e||null===(i=e.category)||void 0===i||null===(s=i.children)||void 0===s?void 0:s.map((e=>{var t,a,l;return{title:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,disabled:!(null===(a=e.children)||void 0===a||!a.length),children:null===(l=e.children)||void 0===l?void 0:l.map((e=>{var t;return{title:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}}))}}))}}))))}})})}),(0,C.jsx)(o.A,{span:8,children:(0,C.jsx)(d.A.Item,{label:r("unit"),name:"unit",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(m.A,{labelInValue:!0,filterOption:!1,options:$})})}),(0,C.jsx)(o.A,{span:8,children:(0,C.jsx)(d.A.Item,{label:r("qr_code"),name:"qr_code",rules:[{required:!0,message:r("required")}],help:(null===O||void 0===O||null===(a=O.qr_code)||void 0===a?void 0:a[0])||null,validateStatus:null!==O&&void 0!==O&&null!==(n=O.qr_code)&&void 0!==n&&n[0]?"error":"success",children:(0,C.jsx)(c.A,{})})}),(0,C.jsx)(o.A,{span:8,children:(0,C.jsx)(d.A.Item,{label:r("keywords"),name:"keywords",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(c.A,{})})}),(0,C.jsx)(o.A,{span:6,children:(0,C.jsx)(d.A.Item,{label:r("tax"),name:"tax",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(h.A,{min:0,className:"w-100",addonAfter:"%"})})}),(0,C.jsx)(o.A,{span:6,children:(0,C.jsx)(d.A.Item,{label:r("min.qty"),name:"min_qty",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(h.A,{min:1,className:"w-100"})})}),(0,C.jsx)(o.A,{span:6,children:(0,C.jsx)(d.A.Item,{label:r("max.qty"),name:"max_qty",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(h.A,{min:1,className:"w-100"})})}),(0,C.jsx)(o.A,{span:6,children:(0,C.jsx)(d.A.Item,{label:r("price"),name:"price",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(h.A,{min:0,className:"w-100"})})}),(0,C.jsx)(o.A,{span:6,children:(0,C.jsx)(d.A.Item,{label:r("quantity"),name:"quantity",rules:[{required:!0,message:r("required")}],children:(0,C.jsx)(h.A,{min:0,className:"w-100"})})}),(0,C.jsx)(o.A,{span:6,children:(0,C.jsx)(d.A.Item,{label:r("active"),name:"active",valuePropName:"checked",children:(0,C.jsx)(v.A,{})})}),(0,C.jsx)(o.A,{span:24,children:(0,C.jsx)(d.A.Item,{label:r("images"),name:"images",children:(0,C.jsx)(k.A,{type:"products",imageList:B,setImageList:E,form:I})})})]}),(0,C.jsx)(x.A,{type:"primary",htmlType:"submit",loading:P,disabled:P,children:r("next")})]})}var F=a(22353),O=a(62425);const{Step:M}=n.A,L=()=>{var e;const{t:t}=(0,j.B)(),{activeMenu:a}=(0,p.d4)((e=>e.menu),p.bN),[d,u]=(0,l.useState)((null===(e=a.data)||void 0===e?void 0:e.step)||0),[o,c]=(0,l.useState)(null),m=()=>{u(d+1)},h=()=>{u(d-1)};return(0,C.jsxs)(i.A,{title:t("add.product"),extra:(0,C.jsx)(s.A,{}),children:[(0,C.jsx)(n.A,{current:d,children:r.C.map((e=>(0,C.jsx)(M,{title:t(e.title)},e.title)))}),(0,C.jsxs)("div",{className:"steps-content",children:["First-content"===r.C[d].content&&(0,C.jsx)(N,{next:m,setUuid:c}),"Second-content"===r.C[d].content&&(0,C.jsx)(F.A,{next:m,prev:h,uuid:o}),"Third-content"===r.C[d].content&&(0,C.jsx)(O.A,{prev:h})]})]})}},27276:(e,t,a)=>{a.d(t,{v:()=>r});var l=a(9950),n=a(90777),i=a(90650),s=a(44414);const r=e=>{let{fetchOptions:t,refetch:a=!1,...r}=e;const[d,u]=(0,l.useState)(!1),[o,c]=(0,l.useState)([]);return(0,s.jsx)(n.A,{treeData:d?[]:o,treeLine:!0,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:()=>{o.length&&!a||(u(!0),t().then((e=>{c(e),u(!1)})))},notFoundContent:d?(0,s.jsx)(i.A,{size:"small"}):"no results",...r})}},47992:(e,t,a)=>{a.d(t,{G:()=>u});var l=a(9950),n=a(95491),i=a.n(n),s=a(99674),r=a(90650),d=a(44414);const u=e=>{let{fetchOptions:t,debounceTimeout:a=400,...n}=e;const[u,o]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),h=(0,l.useMemo)((()=>i()((e=>{m([]),o(!0),t(e).then((e=>{m(e),o(!1)}))}),a)),[t,a]);return(0,d.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,notFoundContent:u?(0,d.jsx)(r.A,{size:"small"}):"no results",...n,options:c,onFocus:()=>{c.length||h("")}})}}}]);