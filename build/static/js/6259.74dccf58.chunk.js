"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6259],{12970:(e,a,l)=>{function t(e){var a,l;let t=null===e||void 0===e?void 0:e.slice(0,1),i=null===e||void 0===e?void 0:e.lastIndexOf("@"),n=null===e||void 0===e?void 0:e.slice(1,i-1);n=null===(a=n)||void 0===a?void 0:a.replace(/./g,"*");let s=null===e||void 0===e?void 0:e.slice(i-1,e.length);return null===t||void 0===t||null===(l=t.concat(n))||void 0===l?void 0:l.concat(s)}l.d(a,{A:()=>t})},53387:(e,a,l)=>{l.d(a,{A:()=>d});var t=l(89379),i=l(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=l(16233),r=function(e,a){return i.createElement(s.A,(0,t.A)((0,t.A)({},e),{},{ref:a,icon:n}))};r.displayName="PlusCircleOutlined";const d=i.forwardRef(r)},53774:(e,a,l)=>{function t(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}l.d(a,{A:()=>t})},54021:(e,a,l)=>{l.d(a,{A:()=>d});var t=l(89379),i=l(9950),n=l(2104),s=l(16233),r=function(e,a){return i.createElement(s.A,(0,t.A)((0,t.A)({},e),{},{ref:a,icon:n.A}))};r.displayName="EyeOutlined";const d=i.forwardRef(r)},56259:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ie});var t=l(9950),i=l(92555),n=l(25887),s=l(20567),r=l(28429),d=l(59051),o=l.n(d),u=l(53271),c=l(81446),m=l(87094),v=l(41988),h=l(93124),p=l(99674),A=l(48538),x=l(91854),j=l(49348),g=l(74623),f=l(39539),y=l(70030),b=l(3855),w=l(2777),S=l(47992),_=l(58547),I=l(13311),k=l(4119),q=l(5436),N=l(5689),C=l(54218),M=l(44414);function z(e){var a,l,i;let{form:s,data:d,image:c,setImage:w,action_type:z=""}=e;const{t:B}=(0,y.B)(),E=(0,x.d4)((e=>e.menu.activeMenu),x.bN),F=(0,x.wA)(),$=(0,r.Zp)(),{uuid:O}=(0,r.g)(),R=(0,r.zy)(),[D,K]=(0,t.useState)(),[P,T]=(0,t.useState)(null),[U,V]=(0,t.useState)(!1),L=null===E||void 0===E||null===(a=E.data)||void 0===a?void 0:a.role,Y=(0,x.d4)((e=>e.user),x.bN),H=(0,x.d4)((e=>e.client),x.bN),{isDemo:G}=(0,I.A)();return d?(0,M.jsx)(n.A,{form:s,layout:"vertical",initialValues:{gender:"male",role:"admin",shop_id:null===d||void 0===d||null===(l=d.shop)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.translation,...d,birthday:null!==d&&void 0!==d&&d.birthday?o()(d.birthday):null},onFinish:e=>{var a;const l={firstname:e.firstname,lastname:e.lastname,email:G||null===e||void 0===e?void 0:e.email,phone:G||null===e||void 0===e?void 0:e.phone,birthday:o()(D).format("YYYY-MM-DD"),gender:e.gender,images:[null===c||void 0===c?void 0:c.name],shop_id:null===e||void 0===e||null===(a=e.shop_id)||void 0===a?void 0:a.map((e=>e.value)),role:L},t=0===R.pathname.search("/user/delivery/")?"deliveries/list":"user"!==d.role?"users/admin":"users/user",i={...Y.params,role:d.role},n={...H.params};"edit"===z?u.A.update(O,l).then((()=>{j.oR.success(B("successfully.updated")),F((0,g.EK)({...E,nextUrl:t})),$(`/${t}`),"user"===d.role?F((0,b.$3)(n)):F((0,f.hU)(i))})).catch((e=>T(e.response.data.params))).finally((()=>V(!1))):u.A.create(l).then((()=>{j.oR.success(B("successfully.updated")),F((0,g.EK)({...E,nextUrl:t})),$(`/${t}`),"user"===d.role?F((0,b.$3)(n)):F((0,f.hU)(i))})).catch((e=>T(e.response.data.params))).finally((()=>V(!1)))},className:"px-2",children:(0,M.jsxs)(m.A,{gutter:12,children:[(0,M.jsx)(v.A,{span:24,children:(0,M.jsx)(n.A.Item,{name:"image",label:B("avatar"),children:(0,M.jsx)(C.A,{type:"users",image:c,setImage:w,form:s,multiple:!1,name:"logo_img"})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:B("firstname"),name:"firstname",help:null!==P&&void 0!==P&&P.firstname?P.firstname[0]:null,validateStatus:null!==P&&void 0!==P&&P.firstname?"error":"success",rules:[{required:!0,message:B("required")}],children:(0,M.jsx)(h.A,{className:"w-100"})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:B("lastname"),name:"lastname",help:null!==P&&void 0!==P&&P.lastname?P.lastname[0]:null,validateStatus:null!==P&&void 0!==P&&P.lastname?"error":"success",rules:[{required:!0,message:B("required")}],children:(0,M.jsx)(h.A,{className:"w-100"})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(k.A,{label:B("phone"),name:"phone",error:P})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(N.A,{label:B("birthday"),name:"birthday",valuePropName:"data",onChange:e=>K(e)})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:B("gender"),name:"gender",rules:[{required:!0,message:B("required")}],children:(0,M.jsxs)(p.A,{picker:"dayTime",className:"w-100",children:[(0,M.jsx)(p.A.Option,{value:"male",children:B("male")}),(0,M.jsx)(p.A.Option,{value:"female",children:B("female")})]})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(q.A,{label:B("email"),name:"email",error:P})}),"admin"!==L&&"manager"!==L&&"seller"!==L&&"user"!==L&&(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:B("shop"),name:"shop_id",rules:[{required:!1,message:B("required")}],children:(0,M.jsx)(S.G,{mode:"multiple",fetchOptions:async function(e){const a={search:e,status:"approved"};return _.A.search(a).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},className:"w-100",placeholder:B("select.shop"),allowClear:!1})})}),(0,M.jsx)(v.A,{span:24,children:(0,M.jsx)(A.A,{type:"primary",htmlType:"submit",loading:U,children:B("save")})})]})}):""}var B=l(74947),E=l(80737),F=l(3754),$=l(54021),O=l(90582),R=l(51242),D=l(53774),K=l(23758);function P(e){let{data:a}=e;const l=(0,x.wA)(),i=(0,r.Zp)(),{t:n}=(0,y.B)(),[s,d]=(0,t.useState)(1),[o,u]=(0,t.useState)(10),[c,m]=(0,t.useState)(1),[v,h]=(0,t.useState)(!1),[p,j]=(0,t.useState)([]),f=[{title:n("id"),dataIndex:"id",key:"id",render:(e,a)=>(0,M.jsxs)("div",{children:[e,"new"===a.status&&(0,M.jsx)(B.A,{count:n("new"),style:{backgroundColor:"#52c41a",position:"absolute",top:-30,right:-30,display:"block",width:41,zIndex:10}})]})},{title:n("client"),dataIndex:"user",key:"user",render:e=>(0,M.jsxs)("div",{children:[e.firstname," ",e.lastname]})},{title:n("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,M.jsxs)("div",{className:"text-lowercase",children:[e," ",n("products")]})},{title:n("amount"),dataIndex:"price",key:"price",render:(e,a)=>{var l;return(0,D.A)(e,null===(l=a.currency)||void 0===l?void 0:l.symbol)}},{title:n("created.at"),dataIndex:"created_at",key:"created_at"},{title:n("options"),key:"options",render:(e,a)=>(0,M.jsxs)(E.A,{children:[(0,M.jsx)(A.A,{icon:(0,M.jsx)($.A,{}),onClick:()=>(e=>{l((0,g.X4)({url:`order/details/${e.id}`,id:"order_details",name:n("order.details")})),i(`/order/details/${e.id}`)})(a)}),(0,M.jsx)(A.A,{type:"primary",icon:(0,M.jsx)(O.A,{}),onClick:()=>(e=>{l((0,R.Uy)()),l((0,g.X4)({url:`order/${e.id}`,id:"order_edit",name:n("edit.order")})),i(`/order/${e.id}`)})(a)})]})}];return(0,t.useEffect)((()=>{!function(){h(!0);const e={user_id:a.id};K.A.getAll(e).then((e=>{j(e.data),m(e.meta.total)})).finally((()=>h(!1)))}()}),[]),console.log("List",p),(0,M.jsx)(F.A,{columns:f,dataSource:(null===p||void 0===p?void 0:p.orders)||[],loading:v,pagination:{pageSize:o,page:s,total:c},rowKey:e=>e.id,onChange:function(e){const{pageSize:a,current:l}=e;d(l),u(a)}})}var T=l(53387),U=l(27741),V=l(40202);function L(e){let{modal:a,uuid:l,handleCancel:i}=e;const[s,r]=(0,t.useState)(!1),[d]=n.A.useForm(),{t:o}=(0,y.B)(),c=(0,x.wA)(),{activeMenu:m}=(0,x.d4)((e=>e.menu),x.bN);return(0,M.jsx)(U.A,{visible:a,title:o("topup.wallet"),onCancel:i,footer:[(0,M.jsx)(A.A,{type:"default",onClick:i,children:o("cancel")},"cancel-btn"),(0,M.jsx)(A.A,{type:"primary",onClick:()=>d.submit(),loading:s,children:o("save")},"submit-btn")],children:(0,M.jsxs)(n.A,{layout:"vertical",form:d,onFinish:e=>{r(!0),u.A.topupWallet(l,e).then((()=>{j.oR.success(o("successfully.added")),c((0,g.Ms)(m)),i()})).finally((()=>r(!1)))},children:[(0,M.jsx)(n.A.Item,{label:o("price"),name:"price",rules:[{required:!0,message:o("required")}],children:(0,M.jsx)(V.A,{className:"w-100",min:0})}),(0,M.jsx)(n.A.Item,{label:o("note"),name:"note",children:(0,M.jsx)(h.A,{})})]})})}function Y(e){var a;let{data:l}=e;const{t:i}=(0,y.B)(),[n,s]=(0,t.useState)(1),[r,d]=(0,t.useState)(10),[o,c]=(0,t.useState)(1),[m,v]=(0,t.useState)(!1),[h,p]=(0,t.useState)([]),[j,g]=(0,t.useState)(!1),{defaultCurrency:f}=(0,x.d4)((e=>e.currency),x.bN),b=[{title:i("created.by"),dataIndex:"author",key:"author",render:e=>(0,M.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:i("price"),dataIndex:"price",key:"price",render:e=>(0,D.A)(e,null===f||void 0===f?void 0:f.symbol)},{title:i("note"),dataIndex:"note",key:"note"},{title:i("created.at"),dataIndex:"created_at",key:"created_at"}];return(0,t.useEffect)((()=>{v(!0),u.A.walletHistory(l.uuid).then((e=>{p(e.data),c(e.meta.total)})).finally((()=>v(!1)))}),[]),(0,M.jsxs)("div",{className:"px-2",children:[(0,M.jsx)("div",{className:"d-flex justify-content-end",children:(0,M.jsx)(A.A,{type:"primary",icon:(0,M.jsx)(T.A,{}),onClick:()=>g(!0),children:`${i("wallet")}: ${(0,D.A)(null===l||void 0===l||null===(a=l.wallet)||void 0===a?void 0:a.price,f.symbol)}`})}),(0,M.jsx)(F.A,{columns:b,dataSource:h,loading:m,pagination:{pageSize:r,page:n,total:o},rowKey:e=>e.id,onChange:function(e,a,l){const{pageSize:t,current:i}=e;s(i),d(t)}}),j&&(0,M.jsx)(L,{modal:j,uuid:l.uuid,handleCancel:()=>g(!1)})]})}var H=l(62466),G=l(693),X=l(95524);function Z(){const{t:e}=(0,y.B)(),[a]=n.A.useForm(),[l,i]=(0,t.useState)(null),[d,o]=(0,t.useState)(!1),{uuid:c}=(0,r.g)();return(0,M.jsx)(s.A,{title:e("user.password.change"),children:(0,M.jsx)(n.A,{form:a,layout:"vertical",onFinish:a=>{o(!0);const l={password:a.password?a.password:void 0,password_confirmation:a.password_confirmation};u.A.updatePassword(c,l).then((()=>{j.oR.success(e("successfully.created"))})).catch((e=>i(e.response.data.params))).finally((()=>o(!1)))},children:(0,M.jsxs)(m.A,{gutter:12,children:[(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(G.A,{label:e("password"),name:"password"})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(X.A,{label:e("password.confirmation"),name:"password_confirmation",dependencies:["password"]})}),(0,M.jsx)(v.A,{span:24,children:(0,M.jsx)(A.A,{type:"primary",htmlType:"submit",loading:d,children:e("save")})})]})})})}var W=l(64272),J=l(78498),Q=l(29597);const ee=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],ae=e=>{let{id:a,data:l}=e;const{t:i}=(0,y.B)(),[s]=n.A.useForm(),[r,d]=(0,t.useState)(!1),[o,u]=(0,t.useState)(!1),[j,g]=(0,t.useState)([]),{settings:f}=(0,x.d4)((e=>e.globalSettings),x.bN),[b,S]=(0,t.useState)((0,Q.A)(f)),_=e=>e.map((e=>({uid:e.id,name:e.path,url:e.path})));return(0,t.useEffect)((()=>{a&&(e=>{u(!0),W.A.getById(e).then((e=>{var a,l,t,i,n,r,d,o;const u={...e.data,user_id:{label:e.data.deliveryMan.firstname+" "+e.data.deliveryMan.firstname,value:e.data.deliveryMan.id,images:_(e.data.galleries),location:{lat:null===(a=e.data)||void 0===a||null===(l=a.location)||void 0===l?void 0:l.latitude,lng:null===(t=e.data)||void 0===t||null===(i=t.location)||void 0===i?void 0:i.longitude}}};S({lat:null===(n=e.data)||void 0===n||null===(r=n.location)||void 0===r?void 0:r.latitude,lng:null===(d=e.data)||void 0===d||null===(o=d.location)||void 0===o?void 0:o.longitude}),g(_(e.data.galleries)),s.setFieldsValue(u)})).finally((()=>u(!1)))})(a)}),[]),(0,M.jsx)(n.A,{name:"basic",layout:"vertical",onFinish:e=>{var t;d(!0);const i={...e,user_id:l.id,images:[null===(t=j[0])||void 0===t?void 0:t.name],location:{latitude:b.lat,longitude:b.lng}};W.A.update(a,i).finally((()=>d(!1)))},form:s,children:o?(0,M.jsx)(c.A,{}):(0,M.jsxs)(m.A,{gutter:12,children:[(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:i("brand"),name:"brand",rules:[{required:!0,message:i("required")}],children:(0,M.jsx)(h.A,{})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:i("model"),name:"model",rules:[{required:!0,message:i("required")}],children:(0,M.jsx)(h.A,{})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:i("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:i("required")}],children:(0,M.jsx)(p.A,{options:ee})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:i("car.number"),name:"number",rules:[{required:!0,message:i("required")}],children:(0,M.jsx)(h.A,{})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:i("car.color"),name:"color",rules:[{required:!0,message:i("required")}],children:(0,M.jsx)(h.A,{})})}),(0,M.jsx)(v.A,{span:12,children:(0,M.jsx)(n.A.Item,{label:i("image"),name:"images",children:(0,M.jsx)(w.A,{type:"deliveryman/setting",imageList:j,setImageList:g,form:s,length:"1",multiple:!0})})}),(0,M.jsx)(v.A,{span:24,children:(0,M.jsx)(n.A.Item,{label:i("map"),name:"location",children:(0,M.jsx)(J.A,{location:b,setLocation:S})})}),(0,M.jsx)(v.A,{span:24,children:(0,M.jsx)(A.A,{type:"primary",htmlType:"submit",loading:r,children:i("save")})})]})})};var le=l(12970);const{TabPane:te}=i.A,ie=()=>{var e;const{t:a}=(0,y.B)(),[l]=n.A.useForm(),{activeMenu:d}=(0,x.d4)((e=>e.menu),x.bN),m=(0,x.wA)(),{uuid:v}=(0,r.g)(),[h,p]=(0,t.useState)(!1),[A,j]=(0,t.useState)("edit"),[f,b]=(0,t.useState)([]),[w,S]=(0,t.useState)(null),_=null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.role,{isDemo:k}=(0,I.A)();(0,t.useEffect)((()=>{null!==d&&void 0!==d&&d.refetch&&(e=>{p(!0),u.A.getById(e).then((e=>{var a,t;const i=e.data,n={...i,image:(0,H.A)(i.img)};m((0,g.Ok)({activeMenu:d,data:n})),l.setFieldsValue({firstname:i.firstname,lastname:i.lastname,email:k?(0,le.A)(i.email):i.email,phone:i.phone,birthday:o()(i.birthday),gender:i.gender,password_confirmation:i.password_confirmation,password:i.password,image:[(0,H.A)(i.img)],shop_id:0!==i.invitations.length?i.invitations.map((e=>{var a,l,t;return{label:null===(a=e.shop)||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title,value:null===(t=e.shop)||void 0===t?void 0:t.id}})):void 0}),b((0,H.A)(i.img)),S(null===(a=e.data)||void 0===a||null===(t=a.delivery_man_setting)||void 0===t?void 0:t.id)})).finally((()=>{p(!1),m((0,g.km)(d))}))})(v)}),[null===d||void 0===d?void 0:d.refetch]);return(0,M.jsx)(s.A,{title:a("user.settings"),children:h?(0,M.jsx)(c.A,{}):(0,M.jsxs)(i.A,{activeKey:A,onChange:e=>j(e),tabPosition:"left",size:"small",children:[(0,M.jsx)(te,{tab:a("edit.user"),children:(0,M.jsx)(z,{data:null===d||void 0===d?void 0:d.data,form:l,image:f,setImage:b,action_type:"edit"})},"edit"),(0,M.jsx)(te,{tab:a("orders"),children:(0,M.jsx)(P,{data:null===d||void 0===d?void 0:d.data})},"order"),"deliveryman"===_&&(0,M.jsx)(te,{tab:a("deliveryman"),children:(0,M.jsx)(ae,{id:w,data:d.data})},"delivery"),(0,M.jsx)(te,{tab:a("wallet"),children:(0,M.jsx)(Y,{data:null===d||void 0===d?void 0:d.data})},"wallet"),(0,M.jsx)(te,{tab:a("password"),children:(0,M.jsx)(Z,{data:null===d||void 0===d?void 0:d.data})},"password")]})})}},90582:(e,a,l)=>{l.d(a,{A:()=>d});var t=l(89379),i=l(9950),n=l(42701),s=l(16233),r=function(e,a){return i.createElement(s.A,(0,t.A)((0,t.A)({},e),{},{ref:a,icon:n.A}))};r.displayName="EditOutlined";const d=i.forwardRef(r)}}]);