"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4225],{14225:(e,s,t)=>{t.r(s),t.d(s,{default:()=>M});var a=t(9950),n=t(28429),r=t(49348),l=t(25887),d=t(20567),i=t(87094),u=t(41988),c=t(99674),o=t(40202),m=t(37437),h=t(48538),p=t(59051),x=t.n(p),A=t(91854),j=t(74623),f=t(35765),v=t(73439),g=t(47992),b=t(67231),y=t(70030),Y=t(54218),q=t(44414);function M(){var e,s;const{t:t}=(0,y.B)(),{activeMenu:p}=(0,A.d4)((e=>e.menu),A.bN),M=(0,A.wA)(),[D]=l.A.useForm(),N=(0,n.Zp)(),[w,S]=(0,a.useState)(!1),[I,O]=(0,a.useState)(null===(e=p.data)||void 0===e?void 0:e.has_date),[k,F]=(0,a.useState)((null===(s=p.data)||void 0===s?void 0:s.image)||null);(0,a.useEffect)((()=>()=>{const e=D.getFieldsValue(!0),s=JSON.stringify(e.start),t=JSON.stringify(e.end),a={...e,start:s,end:t};M((0,j.Ok)({activeMenu:p,data:a}))}),[]);return(0,q.jsx)(d.A,{title:t("add.discount"),className:"h-100",children:(0,q.jsxs)(l.A,{name:"discount-add",layout:"vertical",onFinish:e=>{const s={price:e.price,type:e.type,products:e.products.map((e=>e.value)),start:e.start?x()(e.start).format("YYYY-MM-DD"):void 0,end:e.end?x()(e.end).format("YYYY-MM-DD"):void 0,images:[null===k||void 0===k?void 0:k.name]};S(!0);const a="seller/discounts";f.A.create(s).then((()=>{r.oR.success(t("successfully.created")),M((0,j.EK)({...p,nextUrl:a})),N(`/${a}`),M((0,v.X)({}))})).finally((()=>S(!1)))},form:D,initialValues:{...(()=>{var e;const s=p.data;if(null===(e=p.data)||void 0===e||!e.start)return s;const t=p.data.start,a=p.data.end;return{...s,start:x()(t,"YYYY-MM-DD"),end:x()(a,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,q.jsxs)(i.A,{gutter:12,children:[(0,q.jsx)(u.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:t("type"),name:"type",rules:[{required:!0,message:t("required")}],children:(0,q.jsxs)(c.A,{children:[(0,q.jsx)(c.A.Option,{value:"fix",children:t("fix")}),(0,q.jsx)(c.A.Option,{value:"percent",children:t("percent")})]})})}),(0,q.jsx)(u.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:t("price"),name:"price",rules:[{required:!0,message:t("required")}],children:(0,q.jsx)(o.A,{min:0,className:"w-100"})})}),(0,q.jsx)(u.A,{span:24,children:(0,q.jsx)(l.A.Item,{label:t("image"),name:"image",rules:[{required:!0,message:t("required")}],children:(0,q.jsx)(Y.A,{form:D,image:k,setImage:F,name:"image",type:"discounts"})})}),(0,q.jsx)(u.A,{span:6,children:(0,q.jsx)(l.A.Item,{label:t("start.date"),name:"start",rules:[{required:!0,message:t("required")}],children:(0,q.jsx)(m.A,{className:"w-100",placeholder:"",disabledDate:e=>x()().add(-1,"days")>=e})})}),(0,q.jsx)(u.A,{span:6,children:(0,q.jsx)(l.A.Item,{label:t("end.date"),name:"end",rules:[{required:!0,message:t("required")}],children:(0,q.jsx)(m.A,{className:"w-100",placeholder:"",disabledDate:e=>x()().add(-1,"days")>=e})})}),(0,q.jsx)(u.A,{span:24,children:(0,q.jsx)(l.A.Item,{label:t("products"),name:"products",rules:[{required:!0,message:t("required")}],children:(0,q.jsx)(g.G,{fetchOptions:async function(e){const s={search:e};return b.A.getAll(s).then((e=>e.data.map((e=>{var s;return{label:null===(s=e.product.translation)||void 0===s?void 0:s.title,value:e.id}}))))},mode:"multiple"})})})]}),(0,q.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,q.jsx)("div",{className:"pb-5",children:(0,q.jsx)(h.A,{type:"primary",htmlType:"submit",loading:w,children:t("submit")})})})]})})}},47992:(e,s,t)=>{t.d(s,{G:()=>u});var a=t(9950),n=t(95491),r=t.n(n),l=t(99674),d=t(90650),i=t(44414);const u=e=>{let{fetchOptions:s,debounceTimeout:t=400,...n}=e;const[u,c]=(0,a.useState)(!1),[o,m]=(0,a.useState)([]),h=(0,a.useMemo)((()=>r()((e=>{m([]),c(!0),s(e).then((e=>{m(e),c(!1)}))}),t)),[s,t]);return(0,i.jsx)(l.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,notFoundContent:u?(0,i.jsx)(d.A,{size:"small"}):"no results",...n,options:o,onFocus:()=>{o.length||h("")}})}}}]);