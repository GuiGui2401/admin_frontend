"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5709],{13700:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(89379),n=t(9950);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var i=t(25085),s=function(e,a){return n.createElement(i.A,(0,l.A)((0,l.A)({},e),{},{ref:a,icon:d}))};const o=n.forwardRef(s)},21777:(e,a,t)=>{t.d(a,{A:()=>o});t(9950);var l=t(27741),n=t(32312),d=t(48538),i=t(70030),s=t(44414);const o=e=>{let{open:a,handleCancel:t,text:o,click:r,loading:c,subTitle:u}=e;const{t:v}=(0,i.B)();return(0,s.jsxs)(l.A,{closable:!1,visible:a,footer:null,centered:!0,children:[(0,s.jsx)(n.Ay,{status:"warning",title:o,subTitle:u}),(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)(d.A,{type:"primary",className:"mr-2",onClick:r,loading:c,children:v("yes")}),(0,s.jsx)(d.A,{onClick:()=>t(),children:v("no")})]})]})}},95709:(e,a,t)=>{t.r(a),t.d(a,{default:()=>J});var l=t(9950),n=t(33022),d=t(62863),i=t(12916),s=t(48538),o=t(80737),r=t(20567),c=t(73092),u=t(28429),v=t(24513),h=t(12678),m=t(44070),x=t(98114),p=t(89379);const A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var j=t(25085),y=function(e,a){return l.createElement(j.A,(0,p.A)((0,p.A)({},e),{},{ref:a,icon:A}))};const f=l.forwardRef(y);var g=t(13700),k=t(91854),_=t(74623),b=t(70030),w=t(47992),C=t(88986),M=t(53177),S=t(8168),V=t(8297),Y=t(53774),H=t(56592),I=t(23283),z=t(28645),D=t(39174),N=t(38635),P=t(26714),O=t(49348),R=t(35116),T=t(23758),$=t(55386),B=t(76083),G=t(63620),E=t(81446),K=t(69091),W=t(64272),L=t(59051),X=t.n(L),Z=(t(21777),t(44414));const{RangePicker:q}=n.A,{TabPane:F}=d.A;function J(){var e,a,t,n;const p=(0,k.wA)(),A=(0,u.Zp)(),{t:j}=(0,b.B)(),{defaultCurrency:y}=(0,k.d4)((e=>e.currency),k.bN),[L,J]=(0,l.useState)(),[Q,U]=(0,l.useState)(null),[ee,ae]=(0,l.useState)(null),[te,le]=(0,l.useState)(null),[ne,de]=(0,l.useState)(null),ie=[{id:7,name:"all"},{id:8,name:"accepted"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[se,oe]=(0,l.useState)([{title:j("id"),is_show:!0,dataIndex:"id",key:"id"},{title:j("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,Z.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:j("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,Z.jsxs)("div",{className:"text-lowercase",children:[e||0," ",j("products")]})},{title:j("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,a)=>(0,Z.jsxs)("div",{children:["new"===e?(0,Z.jsx)(i.A,{color:"blue",children:j(e)}):"canceled"===e?(0,Z.jsx)(i.A,{color:"error",children:j(e)}):(0,Z.jsx)(i.A,{color:"cyan",children:j(e)}),"delivered"!==e&&"canceled"!==e?(0,Z.jsx)(v.A,{onClick:()=>U(a)}):""]})},{title:j("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,a)=>(0,Z.jsx)("div",{children:"ready"===a.status&&"pickup"!==a.delivery_type?(0,Z.jsx)(s.A,{type:"link",onClick:()=>de(a),children:(0,Z.jsxs)(o.A,{children:[e?`${e.firstname} ${e.lastname}`:j("add.deliveryman"),(0,Z.jsx)(v.A,{})]})}):(0,Z.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:j("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,Y.A)(e,y.symbol)},{title:j("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var a,t;return j(null===e||void 0===e||null===(a=e.payment_system)||void 0===a||null===(t=a.payment)||void 0===t?void 0:t.tag)||"-"}},{title:j("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:j("options"),is_show:!0,key:"options",render:(e,a)=>(0,Z.jsxs)(o.A,{children:[(0,Z.jsx)(s.A,{icon:(0,Z.jsx)(D.kMs,{}),onClick:()=>ae(a.id)}),(0,Z.jsx)(s.A,{icon:(0,Z.jsx)(h.A,{}),onClick:()=>(e=>{p((0,_.X4)({url:`order/details/${e.id}`,id:"order_details",name:j("order.details")})),A(`/order/details/${e.id}`)})(a)}),(0,Z.jsx)(R.A,{icon:(0,Z.jsx)(m.A,{}),onClick:()=>{xe([a.id]),re(!0),Ae(!0)}}),(0,Z.jsx)(s.A,{icon:(0,Z.jsx)(x.A,{}),onClick:()=>le(a.id)})]})}]),{setIsModalVisible:re}=(0,l.useContext)($.o),[ce,ue]=(0,l.useState)(!1),{activeMenu:ve}=(0,k.d4)((e=>e.menu),k.bN),he=(null===(e=ve.data)||void 0===e?void 0:e.status)||"all",[me,xe]=(0,l.useState)(null),[pe,Ae]=(0,l.useState)(null),[je,ye]=(0,l.useState)(!1),{orders:fe,meta:ge,loading:ke,params:_e,statistic:be}=(0,k.d4)((e=>e.orders),k.bN),we=null===ve||void 0===ve?void 0:ve.data;(0,C.A)((()=>{var e;const a={search:null===we||void 0===we?void 0:we.search,sort:null===we||void 0===we?void 0:we.sort,column:null===we||void 0===we?void 0:we.column,perPage:null===we||void 0===we?void 0:we.perPage,page:null===we||void 0===we?void 0:we.page,deliveryman:null===we||void 0===we||null===(e=we.deliveryman)||void 0===e?void 0:e.value,date_from:null===we||void 0===we?void 0:we.date_from,date_to:null===we||void 0===we?void 0:we.date_to,status:"all"===(null===we||void 0===we?void 0:we.status)||null===we||void 0===we?void 0:we.status};p((0,M.Gb)(a))}),[null===ve||void 0===ve?void 0:ve.data]);const Ce=e=>{const a=ve.data;p((0,_.Ok)({activeMenu:ve,data:{...a,...e}}))},Me=()=>{U(null),de(null),ae(null),le(null)};(0,l.useEffect)((()=>{if(null!==ve&&void 0!==ve&&ve.refetch){const e={status:null===we||void 0===we?void 0:we.status,page:null===we||void 0===we?void 0:we.page,perPage:10,type:"delivery"};p((0,M.Gb)(e)),p((0,_.km)(ve))}}),[null===ve||void 0===ve?void 0:ve.refetch]);const Se={selectedRowKeys:me,onChange:e=>{xe(e)}};return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:ke?(0,Z.jsx)(E.A,{}):(0,Z.jsx)(K.A,{data:be,orders:fe})}),(0,Z.jsx)(r.A,{className:"p-0",children:(0,Z.jsxs)(o.A,{wrap:!0,size:[12,20],children:[(0,Z.jsx)(V.A,{placeholder:j("search"),handleChange:e=>Ce({search:e}),defaultValue:null===(a=ve.data)||void 0===a?void 0:a.search,resetSearch:!(null!==(t=ve.data)&&void 0!==t&&t.search),style:{minWidth:300}}),(0,Z.jsx)(q,{format:"YYYY-MM-DD",onChange:e=>{return a=e,void p((0,_.Ok)({activeMenu:ve,data:{...we,date_from:a?X()(null===a||void 0===a?void 0:a[0]).format("YYYY-MM-DD").toString():void 0,date_to:a?X()(null===a||void 0===a?void 0:a[1]).format("YYYY-MM-DD").toString():void 0}}));var a}}),(0,Z.jsx)(w.G,{className:"w-100",debounceTimeout:500,placeholder:j("select.deliveryman"),fetchOptions:e=>{const a={search:e};return W.A.getAll(a).then((e=>e.data.map((e=>({label:e.firstname+" "+e.lastname,value:e.id})))))},allowClear:!0,onChange:e=>Ce({deliveryman:e}),value:null===(n=ve.data)||void 0===n?void 0:n.deliveryman}),(0,Z.jsxs)(s.A,{onClick:()=>{ue(!0),T.A.export().then((e=>{const a=G.bb+e.data.file_name;window.location.href=a})).finally((()=>ue(!1)))},loading:ce,children:[(0,Z.jsx)(f,{}),j("export")]}),(0,Z.jsx)(s.A,{icon:(0,Z.jsx)(g.A,{}),onClick:()=>{p((0,_.Ok)({activeMenu:ve,data:void 0}))},disabled:!ve.data,style:{minWidth:100}}),(0,Z.jsx)(z.A,{setColumns:oe,columns:se})]})}),(0,Z.jsxs)(r.A,{title:j("orders"),children:[(0,Z.jsx)(d.A,{onChange:e=>{Ce({status:e,page:1})},type:"card",activeKey:he,children:ie.map((e=>(0,Z.jsx)(F,{tab:j(e.name)},e.name)))}),(0,Z.jsx)(c.A,{scroll:{x:1024},rowSelection:Se,columns:null===se||void 0===se?void 0:se.filter((e=>e.is_show)),dataSource:fe,loading:ke,pagination:{pageSize:_e.perPage,page:_e.page,total:ge.total,defaultCurrent:_e.page},rowKey:e=>e.id,onChange:function(e,a,t){const{pageSize:l,current:n}=e,{field:d,order:i}=t,s=(0,S.A)(i);p((0,_.Ok)({activeMenu:ve,data:{...ve.data,perPage:l,page:n,column:d,sort:s}}))}})]}),(0,Z.jsx)(B.A,{click:()=>{ye(!0);const e={...Object.assign({},...me.map(((e,a)=>({[`ids[${a}]`]:e}))))};T.A.delete(e).then((()=>{O.oR.success(j("successfully.deleted")),re(!1),p((0,M.Gb)()),Ae(null)})).finally((()=>ye(!1)))},text:j(pe?"delete":"all.delete"),loading:je,setText:xe}),Q&&(0,Z.jsx)(H.A,{orderDetails:Q,handleCancel:Me,status:ie}),ne&&(0,Z.jsx)(I.A,{orderDetails:ne,handleCancel:Me}),ee&&(0,Z.jsx)(N.A,{id:ee,handleCancel:Me}),te&&(0,Z.jsx)(P.A,{id:te,handleCancel:Me})]})}}}]);