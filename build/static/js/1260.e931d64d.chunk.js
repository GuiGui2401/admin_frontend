"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1260],{8168:(e,t,n)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{A:()=>a})},28645:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(9950),s=n(66362),l=n(69216),i=n(80737),o=n(25933),r=n(57811),d=n(72906),c=n(70030),u=n(44414);const{Text:h}=s.A,p=e=>{let{columns:t=[],setColumns:n}=e;const{t:s}=(0,c.B)(),[p,v]=(0,a.useState)(!1),m=(0,u.jsx)(l.A,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,u.jsx)(l.A.Item,{children:(0,u.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,u.jsx)(h,{children:e.title}),(0,u.jsx)(o.A,{defaultChecked:!0,onClick:()=>{!function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));n(a)}(e)}})]})},a)))});return(0,u.jsx)(r.A,{overlay:m,trigger:["click"],onVisibleChange:e=>{v(e)},visible:p,children:(0,u.jsx)(d.A,{style:{fontSize:"26px"}})})}},47992:(e,t,n)=>{n.d(t,{G:()=>d});var a=n(9950),s=n(95491),l=n.n(s),i=n(99674),o=n(90650),r=n(44414);const d=e=>{let{fetchOptions:t,debounceTimeout:n=400,...s}=e;const[d,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)([]),p=(0,a.useMemo)((()=>l()((e=>{h([]),c(!0),t(e).then((e=>{h(e),c(!1)}))}),n)),[t,n]);return(0,r.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,notFoundContent:d?(0,r.jsx)(o.A,{size:"small"}):"no results",...s,options:u,onFocus:()=>{u.length||p("")}})}},53774:(e,t,n)=>{function a(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}n.d(t,{A:()=>a})},72906:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(89379),s=n(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};var i=n(25085),o=function(e,t){return s.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:l}))};const r=s.forwardRef(o)},81260:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(9950),s=n(62863),l=n(12916),i=n(48538),o=n(20567),r=n(80737),d=n(73092),c=n(12678),u=n(91854),h=n(74623),p=n(70030),v=n(88986),m=n(8168),x=n(47992),A=n(66209),j=n(63242),f=n(27741),g=n(91524),y=n(81446),b=n(22180),I=n(53774),_=n(44414);function w(e){var t,n,s,o,r,d;let{id:c,handleCancel:u}=e;const[h,v]=(0,a.useState)({}),[m,x]=(0,a.useState)(!1),{t:A}=(0,p.B)();return(0,a.useEffect)((()=>{!function(e){x(!0),b.A.getById(e).then((e=>v(e.data))).finally((()=>x(!1)))}(c)}),[c]),(0,_.jsx)(f.A,{visible:!!c,title:A("transaction"),onCancel:u,footer:(0,_.jsx)(i.A,{type:"default",onClick:u,children:A("cancel")}),children:m?(0,_.jsx)(y.A,{}):(0,_.jsxs)(g.A,{bordered:!0,children:[(0,_.jsx)(g.A.Item,{span:3,label:A("transaction.id"),children:h.id}),(0,_.jsxs)(g.A.Item,{span:3,label:A("client"),children:[null===(t=h.user)||void 0===t?void 0:t.firstname," ",null===(n=h.user)||void 0===n?void 0:n.lastname]}),(0,_.jsx)(g.A.Item,{span:3,label:A("price"),children:(0,I.A)(h.price,null===(s=h.payable)||void 0===s||null===(o=s.order)||void 0===o||null===(r=o.currency)||void 0===r?void 0:r.symbol)}),(0,_.jsx)(g.A.Item,{span:3,label:A("payment.type"),children:A(null===(d=h.payment_system)||void 0===d?void 0:d.tag)}),(0,_.jsx)(g.A.Item,{span:3,label:A("created.at"),children:h.created_at}),(0,_.jsx)(g.A.Item,{span:3,label:A("status"),children:"progress"===h.status?(0,_.jsx)(l.A,{color:"gold",children:A(h.status)}):"rejected"===h.status?(0,_.jsx)(l.A,{color:"error",children:A(h.status)}):(0,_.jsx)(l.A,{color:"cyan",children:A(h.status)})}),(0,_.jsx)(g.A.Item,{span:3,label:A("status.description"),children:h.status_description}),(0,_.jsx)(g.A.Item,{span:3,label:A("note"),children:h.note})]})})}var k=n(28645);const{TabPane:C}=s.A,S=["all","progress","paid","rejected"];function z(){var e,t,n,f;const g=(0,u.wA)(),{t:y}=(0,p.B)(),[b,z]=(0,a.useState)(null),{activeMenu:P}=(0,u.d4)((e=>e.menu),u.bN),[B,M]=(0,a.useState)("all"),O=(null===(e=P.data)||void 0===e?void 0:e.role)||B,[T,N]=(0,a.useState)([{title:y("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:y("client"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,_.jsxs)("div",{children:[e.firstname," ",e.lastname||""]})},{title:y("amount"),dataIndex:"price",key:"price",is_show:!0,render:(e,t)=>{var n,a,s;return(0,I.A)(e,null===(n=t.payable)||void 0===n||null===(a=n.order)||void 0===a||null===(s=a.currency)||void 0===s?void 0:s.symbol)}},{title:y("payment.type"),dataIndex:"payment_system",key:"payment_system",is_show:!0,render:e=>null===e||void 0===e?void 0:e.tag},{title:y("status"),dataIndex:"status",key:"status",is_show:!0,render:e=>(0,_.jsx)("div",{children:"progress"===e?(0,_.jsx)(l.A,{color:"gold",children:y(e)}):"rejected"===e?(0,_.jsx)(l.A,{color:"error",children:y(e)}):(0,_.jsx)(l.A,{color:"cyan",children:y(e)})})},{title:y("status.note"),dataIndex:"status_description",key:"status_description",is_show:!0},{title:y("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0},{title:y("options"),key:"options",is_show:!0,render:(e,t)=>(0,_.jsx)(i.A,{icon:(0,_.jsx)(c.A,{}),onClick:()=>(e=>{z(e.id)})(t)})}]),{transactions:$,meta:E,loading:F,params:G}=(0,u.d4)((e=>e.transaction),u.bN),K=P.data,V={sort:null===K||void 0===K?void 0:K.sort,column:null===K||void 0===K?void 0:K.column,perPage:null===K||void 0===K?void 0:K.perPage,page:null===K||void 0===K?void 0:K.page,user_id:null===K||void 0===K?void 0:K.userId,status:"all"===O?void 0:O,model:"orders"};(0,v.A)((()=>{g((0,j.T3)(V))}),[P.data]),(0,a.useEffect)((()=>{P.refetch&&(g((0,j.T3)(V)),g((0,h.km)(P)))}),[P.refetch]);const D=e=>{const t=P.data;g((0,h.Ok)({activeMenu:P,data:{...t,...e}}))};return(0,_.jsxs)(o.A,{title:y("transactions"),extra:(0,_.jsxs)(r.A,{children:[(0,_.jsx)(x.G,{placeholder:y("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return A.A.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id})))}))},onSelect:e=>D({userId:e.value}),onDeselect:()=>D({userId:null}),style:{minWidth:200}}),(0,_.jsx)(k.A,{columns:T,setColumns:N})]}),children:[(0,_.jsx)(s.A,{onChange:e=>{D({role:e,page:1}),M(e)},type:"card",activeKey:O,children:S.map((e=>(0,_.jsx)(C,{tab:y(e)},e)))}),(0,_.jsx)(d.A,{scroll:{x:1024},columns:null===T||void 0===T?void 0:T.filter((e=>e.is_show)),dataSource:$,loading:F,pagination:{pageSize:G.perPage,page:(null===(t=P.data)||void 0===t?void 0:t.page)||1,total:E.total,defaultCurrent:null===(n=P.data)||void 0===n?void 0:n.page,current:null===(f=P.data)||void 0===f?void 0:f.page},rowKey:e=>e.id,onChange:function(e,t,n){const{pageSize:a,current:s}=e,{field:l,order:i}=n,o=(0,m.A)(i);g((0,h.Ok)({activeMenu:P,data:{...K,perPage:a,page:s,column:l,sort:o}}))}}),b&&(0,_.jsx)(w,{id:b,handleCancel:()=>z(null)})]})}}}]);