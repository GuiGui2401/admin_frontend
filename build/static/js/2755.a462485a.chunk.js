"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2755],{31594:(e,t,n)=>{n.d(t,{A:()=>c});n(9950);var a=n(87827),l=n(70030),r=n(36455),s=n(19181),i=n.n(s),o=n(63620),u=n(64924),d=n(44414);function c(e){let{form:t,lang:n,languages:s}=e;const{t:c}=(0,l.B)();return(0,d.jsx)("div",{className:"textEditor",children:(0,d.jsx)(a.A.Item,{label:c("body"),name:"body",valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:!0,message:c("required")}],className:"description-editor",children:(0,d.jsx)(r.CKEditor,{editor:i(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,n)=>{const a=new FormData;e.file.then((e=>{a.append("image",e),a.append("type","blogs"),u.A.upload(a).then((e=>{let{data:n}=e;t({default:`${o.sE+n.title}`})})).catch((e=>{n(e)}))}))}))}}(e)}]},onChange:(e,t)=>{t.getData()},onBlur:(e,n)=>{const a=n.getData();t.setFieldsValue({body:a})}})})})}},47992:(e,t,n)=>{n.d(t,{G:()=>u});var a=n(9950),l=n(95491),r=n.n(l),s=n(99674),i=n(90650),o=n(44414);const u=e=>{let{fetchOptions:t,debounceTimeout:n=400,...l}=e;const[u,d]=(0,a.useState)(!1),[c,f]=(0,a.useState)([]),m=(0,a.useMemo)((()=>r()((e=>{f([]),d(!0),t(e).then((e=>{f(e),d(!1)}))}),n)),[t,n]);return(0,o.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,notFoundContent:u?(0,o.jsx)(i.A,{size:"small"}):"no results",...l,options:c,onFocus:()=>{c.length||m("")}})}},52765:(e,t,n)=>{n.d(t,{A:()=>C});var a=n(64467),l=n(58168),r=n(48738),s=n.n(r),i=n(14691),o=n(9950),u=n(5741),d=n(77643),c=n(60436),f=n(5544),m=n(15207),p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},v=o.createContext(null),h=function(e,t){var n=e.defaultValue,r=e.children,i=e.options,d=void 0===i?[]:i,h=e.prefixCls,g=e.className,b=e.style,x=e.onChange,A=p(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),y=o.useContext(u.QO),O=y.getPrefixCls,C=y.direction,_=o.useState(A.value||n||[]),w=(0,f.A)(_,2),E=w[0],N=w[1],k=o.useState([]),I=(0,f.A)(k,2),M=I[0],S=I[1];o.useEffect((function(){"value"in A&&N(A.value||[])}),[A.value]);var V=function(){return d.map((function(e){return"string"===typeof e||"number"===typeof e?{label:e,value:e}:e}))},F=O("checkbox",h),P="".concat(F,"-group"),q=(0,m.A)(A,["value","disabled"]);d&&d.length>0&&(r=V().map((function(e){return o.createElement(j,{prefixCls:F,key:e.value.toString(),disabled:"disabled"in e?e.disabled:A.disabled,value:e.value,checked:E.includes(e.value),onChange:e.onChange,className:"".concat(P,"-item"),style:e.style},e.label)})));var Y={toggleOption:function(e){var t=E.indexOf(e.value),n=(0,c.A)(E);-1===t?n.push(e.value):n.splice(t,1),"value"in A||N(n);var a=V();null===x||void 0===x||x(n.filter((function(e){return M.includes(e)})).sort((function(e,t){return a.findIndex((function(t){return t.value===e}))-a.findIndex((function(e){return e.value===t}))})))},value:E,disabled:A.disabled,name:A.name,registerValue:function(e){S((function(t){return[].concat((0,c.A)(t),[e])}))},cancelValue:function(e){S((function(t){return t.filter((function(t){return t!==e}))}))}},D=s()(P,(0,a.A)({},"".concat(P,"-rtl"),"rtl"===C),g);return o.createElement("div",(0,l.A)({className:D,style:b},q,{ref:t}),o.createElement(v.Provider,{value:Y},r))},g=o.forwardRef(h);const b=o.memo(g);var x=n(19389),A=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},y=function(e,t){var n,r=e.prefixCls,c=e.className,f=e.children,m=e.indeterminate,p=void 0!==m&&m,h=e.style,g=e.onMouseEnter,b=e.onMouseLeave,y=e.skipGroup,j=void 0!==y&&y,O=e.disabled,C=A(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),_=o.useContext(u.QO),w=_.getPrefixCls,E=_.direction,N=o.useContext(v),k=(0,o.useContext)(d.$W).isFormItemInput,I=(0,o.useContext)(x.A),M=null!==(n=(null===N||void 0===N?void 0:N.disabled)||O)&&void 0!==n?n:I,S=o.useRef(C.value);o.useEffect((function(){null===N||void 0===N||N.registerValue(C.value)}),[]),o.useEffect((function(){if(!j)return C.value!==S.current&&(null===N||void 0===N||N.cancelValue(S.current),null===N||void 0===N||N.registerValue(C.value),S.current=C.value),function(){return null===N||void 0===N?void 0:N.cancelValue(C.value)}}),[C.value]);var V=w("checkbox",r),F=(0,l.A)({},C);N&&!j&&(F.onChange=function(){C.onChange&&C.onChange.apply(C,arguments),N.toggleOption&&N.toggleOption({label:f,value:C.value})},F.name=N.name,F.checked=N.value.includes(C.value));var P=s()((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},"".concat(V,"-wrapper"),!0),"".concat(V,"-rtl"),"rtl"===E),"".concat(V,"-wrapper-checked"),F.checked),"".concat(V,"-wrapper-disabled"),M),"".concat(V,"-wrapper-in-form-item"),k),c),q=s()((0,a.A)({},"".concat(V,"-indeterminate"),p)),Y=p?"mixed":void 0;return o.createElement("label",{className:P,style:h,onMouseEnter:g,onMouseLeave:b},o.createElement(i.A,(0,l.A)({"aria-checked":Y},F,{prefixCls:V,className:q,disabled:M,ref:t})),void 0!==f&&o.createElement("span",null,f))};const j=o.forwardRef(y);var O=j;O.Group=b,O.__ANT_CHECKBOX=!0;const C=O},92755:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(9950),l=n(28429),r=n(49348),s=n(87827),i=n(20567),o=n(87094),u=n(41988),d=n(55902),c=n(99674),f=n(81541),m=n(52765),p=n(33022),v=n(48538),h=n(91854),g=n(74623),b=n(70030),x=n(31594),A=n(59051),y=n.n(A),j=n(24611),O=n(81446),C=n(81499),_=n(7843),w=n(47992),E=n(44414);const N=()=>{var e;const{t:t}=(0,b.B)(),{activeMenu:n}=(0,h.d4)((e=>e.menu),h.bN),A=(0,h.wA)(),[N]=s.A.useForm(),k=(0,l.Zp)(),[I,M]=(0,a.useState)(null===(e=n.data)||void 0===e?void 0:e.has_date),[S,V]=(0,a.useState)(!1),[F,P]=(0,a.useState)(!1),{id:q}=(0,l.g)(),{defaultLang:Y,languages:D}=(0,h.d4)((e=>e.formLang),h.bN);(0,a.useEffect)((()=>()=>{const e=N.getFieldsValue(!0),t=JSON.stringify(e.send_to),a={...e,send_to:t};A((0,g.Ok)({activeMenu:n,data:a}))}),[]);(0,a.useEffect)((()=>{n.refetch&&(e=>{P(!0),j.A.getById(e).then((e=>{var t;M(!0);const n={...e.data,send_to:y()(e.data.send_to,"YYYY-MM-DD HH:mm:ss"),has_date:!0,email_setting_id:{value:e.data.email_setting_id,label:null===(t=e.data.email_setting)||void 0===t?void 0:t.host}};N.setFieldsValue(n)})).finally((()=>{P(!1),A((0,g.km)(n))}))})(q)}),[n.refetch]);return(0,E.jsx)(E.Fragment,{children:F?(0,E.jsx)(O.A,{}):(0,E.jsx)(i.A,{title:t("add.subscriber"),className:"h-100",children:(0,E.jsxs)(s.A,{name:"subscriber-add",layout:"vertical",onFinish:e=>{var a;const l={...e,email_setting_id:null===e||void 0===e||null===(a=e.email_setting_id)||void 0===a?void 0:a.value,send_to:y()(e.send_to).format("YYYY-MM-DD HH:mm:ss")};V(!0);const s="message/subscriber";j.A.update(q,l).then((()=>{r.oR.success(t("successfully.created")),A((0,g.EK)({...n,nextUrl:s})),k(`/${s}`),A((0,C.e)())})).finally((()=>V(!1)))},form:N,initialValues:{type:"order",...n.data,...(()=>{const e=n.data;if(null===e||void 0===e||!e.send_to)return e;const t=e.send_to;return{...e,send_to:y()(t,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,E.jsxs)(o.A,{gutter:12,children:[(0,E.jsx)(u.A,{span:12,children:(0,E.jsx)(s.A.Item,{label:t("subject"),name:"subject",rules:[{required:!0,message:t("required")}],children:(0,E.jsx)(d.A,{})})}),(0,E.jsx)(u.A,{span:12,children:(0,E.jsx)(s.A.Item,{label:t("type"),name:"type",rules:[{required:!0,message:t("required")}],children:(0,E.jsxs)(c.A,{children:[(0,E.jsx)(c.A.Option,{value:"order",children:(0,E.jsx)(f.A,{title:t("order.information"),children:t("order")})}),(0,E.jsx)(c.A.Option,{value:"subscribe",children:(0,E.jsx)(f.A,{title:t("subscribe.information"),children:t("subscribe")})}),(0,E.jsx)(c.A.Option,{value:"verify",children:(0,E.jsx)(f.A,{title:t("verify.information"),children:t("verify")})})]})})}),(0,E.jsx)(u.A,{span:12,children:(0,E.jsx)(s.A.Item,{label:t("email.provider"),name:"email_setting_id",rules:[{required:!0,message:t("required")}],children:(0,E.jsx)(w.G,{fetchOptions:()=>_.A.get().then((e=>{let{data:t}=e;return t.map((e=>({label:e.host,value:e.id})))})),className:"w-100",placeholder:t("email.provider")})})}),(0,E.jsx)(u.A,{span:24,children:(0,E.jsx)(x.A,{languages:D,form:N,lang:Y})}),(0,E.jsx)(u.A,{span:12,children:(0,E.jsx)(s.A.Item,{label:t("alt.body"),name:"alt_body",rules:[{required:!0,message:t("required")}],children:(0,E.jsx)(d.A,{})})}),(0,E.jsx)(u.A,{span:12,children:(0,E.jsx)(s.A.Item,{name:"has_date",valuePropName:"checked",children:(0,E.jsx)(m.A,{checked:I,onChange:e=>M(e.target.checked),children:t("choose.discount.date")})})}),I&&(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(u.A,{span:6,children:(0,E.jsx)(s.A.Item,{label:t("send.to"),name:"send_to",rules:[{required:!0,message:t("required")}],children:(0,E.jsx)(p.A,{showTime:!0,className:"w-100",disabledDate:e=>y()().add(-1,"days")>=e})})})})]}),(0,E.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,E.jsx)("div",{className:"pb-5",children:(0,E.jsx)(v.A,{type:"primary",htmlType:"submit",loading:S,children:t("send")})})})]})})})}}}]);