"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[326],{14713:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var a=l(9950),n=l(28429),s=l(49348),o=l(25887),i=l(20567),d=l(90650),c=l(87094),r=l(41988),u=l(93124),g=l(48538),m=l(91854),f=l(74623),h=l(70030),v=l(71999),p=l(31281),A=l(78498),b=l(58962),x=l(37332),j=l(29597),y=l(54311),N=l(44414);const L=()=>{const{t:e}=(0,h.B)(),{activeMenu:t}=(0,m.d4)((e=>e.menu),m.bN),l=(0,m.wA)(),[L]=o.A.useForm(),k=(0,n.Zp)(),{id:C}=(0,n.g)(),{settings:S}=(0,m.d4)((e=>e.globalSettings),m.bN),[$,w]=(0,a.useState)((0,j.A)(S)),[F,B]=(0,a.useState)(!1),[E,M]=(0,a.useState)(!1),{languages:_,defaultLang:q}=(0,m.d4)((e=>e.formLang),m.bN);function z(e){if(!e)return{};const{translations:t}=e,l=_.map((e=>{var l,a;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`address[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.address}}));return Object.assign({},...l)}(0,a.useEffect)((()=>()=>{const e=L.getFieldsValue(!0);l((0,f.Ok)({activeMenu:t,data:e}))}),[]);return(0,a.useEffect)((()=>{t.refetch&&(e=>{M(!0),b.A.getById(e).then((e=>{let t=e.data;w({lat:Number(t.latitude),lng:Number(t.longitude)}),L.setFieldsValue({...t,...z(t)})})).finally((()=>{l((0,f.km)(t)),M(!1)}))})(C)}),[t.refetch]),(0,N.jsx)(i.A,{title:e("add.branch"),className:"h-100",extra:(0,N.jsx)(v.A,{}),children:(0,N.jsxs)(o.A,{name:"branch-add",layout:"vertical",onFinish:a=>{const n={title:(0,p.A)(_,a,"title"),address:(0,p.A)(_,a,"address"),longitude:$.lng,latitude:$.lat};B(!0);const o="seller/branch";b.A.update(C,n).then((()=>{s.oR.success(e("successfully.created")),l((0,f.EK)({...t,nextUrl:o})),k(`/${o}`),l((0,x.D)())})).finally((()=>B(!1))),console.log("body",n)},form:L,initialValues:{clickable:!0,...t.data},className:"d-flex flex-column h-100",children:[E?(0,N.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,N.jsx)(d.A,{size:"large",className:"py-5"})}):(0,N.jsxs)(c.A,{gutter:12,children:[(0,N.jsx)(r.A,{span:12,children:_.map(((t,l)=>(0,N.jsx)(o.A.Item,{label:e("title"),name:`title[${t.locale}]`,rules:[{required:t.locale===q,message:e("required")}],hidden:t.locale!==q,children:(0,N.jsx)(u.A,{})},"title"+l)))}),(0,N.jsx)(r.A,{span:12,children:_.map(((e,t)=>(0,N.jsx)(y.A,{setLocation:w,form:L,item:e,idx:t,defaultLang:q})))}),(0,N.jsx)(r.A,{span:24,children:(0,N.jsx)(A.A,{location:$,setLocation:w,setAddress:e=>L.setFieldsValue({[`address[${q}]`]:e})})})]}),(0,N.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,N.jsx)("div",{className:"pb-5",children:(0,N.jsx)(g.A,{type:"primary",htmlType:"submit",loading:F,children:e("submit")})})})]})})}},29597:(e,t,l)=>{function a(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(t[0]),lng:Number(t[1])}}l.d(t,{A:()=>a})},31281:(e,t,l)=>{function a(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.filter((e=>t[`${l}[${e.locale}]`])).map((e=>({[e.locale]:t[`${l}[${e.locale}]`]})));return Object.assign({},...a)}l.d(t,{A:()=>a})},54311:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(25887),n=(l(9950),l(56713)),s=l(70030),o=l(91854),i=l(63620),d=l(44414);function c(e){let{setLocation:t,form:l,item:c,idx:r,defaultLang:u}=e;const{t:g}=(0,s.B)(),{google_map_key:m}=(0,o.d4)((e=>e.globalSettings.settings),o.bN),{ref:f}=(0,n.usePlacesWidget)({apiKey:m||i.CJ,onPlaceSelected:e=>{const a={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};t(a),l.setFieldsValue({[`address[${u}]`]:null===e||void 0===e?void 0:e.formatted_address})}});return(0,d.jsx)(a.A.Item,{label:g("address"),name:`address[${null===c||void 0===c?void 0:c.locale}]`,rules:[{required:(null===c||void 0===c?void 0:c.locale)===u,message:g("required")}],hidden:(null===c||void 0===c?void 0:c.locale)!==u,children:(0,d.jsx)("input",{className:"address-input",ref:f,placeholder:""})},"address"+r)}},71999:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(9950),n=l(17811),s=l(12437),o=l(91854),i=l(82406),d=l(44414);const c=()=>{const e=(0,o.wA)(),{languages:t,defaultLang:l}=(0,o.d4)((e=>e.formLang),o.bN);(0,a.useEffect)((()=>{t.length||s.A.getAllActive().then((t=>{let{data:l}=t;e((0,i.Nn)(l))}))}),[]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(n.Ay.Group,{value:l,onChange:t=>{let{target:{value:l}}=t;e((0,i.Qq)(l))},className:"float-right",buttonStyle:"solid",children:t.map((e=>(0,d.jsx)(n.Ay.Button,{value:e.locale,children:e.title},e.id)))})})}},78498:(e,t,l)=>{l.d(t,{A:()=>f});var a=l(9950),n=l(97239),s=l(63620);const o=l.p+"static/media/pin.0e41858db80c699cd8a2.png";var i=l(96011),d=l.n(i),c=l(46125);const{formLang:{defaultLang:r}}=c.M.getState();async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AIzaSyDZQUsmwnkCmD3HMNFCABo8YSE54FCTFYo",l={language:r||"en",latlng:`${null===e||void 0===e?void 0:e.lat},${null===e||void 0===e?void 0:e.lng}`,key:t};return d().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{var t;let{data:l}=e;return null===(t=l.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>(console.log(e),"not found")))}var g=l(39174),m=l(44414);const f=(0,n.GoogleApiWrapper)({apiKey:s.CJ})((function(e){const[t,l]=(0,a.useState)(),i=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};l(t)}))};(0,a.useEffect)((()=>{i()}),[]);const d=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}];for(var c=new e.google.maps.LatLngBounds,r=0;r<d.length;r++)c.extend(d[r]);return(0,m.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,m.jsx)("button",{className:"map-button",type:"button",onClick:()=>{i(),(async t=>{const l={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(l);const a=await u(l,s.CJ);e.setAddress(a)})(t)},children:(0,m.jsx)(g.uFi,{})}),(0,m.jsx)(n.Map,{cursor:"pointer",onClick:async(t,l,a)=>{const{latLng:n}=a,o={lat:n.lat(),lng:n.lng()};e.setLocation(o);const i=await u(o,s.CJ);e.setAddress(i)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,m.jsx)(n.Marker,{position:e.location,icon:{url:o,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))}}]);