"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8853],{41336:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var s=l(9950),n=l(25887),r=l(20567),t=l(87094),i=l(41988),d=l(93124),o=l(99674),u=l(40895),m=l(48538),c=l(28429),h=l(49348),p=l(91854),A=l(74623),b=l(53271),x=l(70030),g=l(59051),j=l.n(g),v=l(2777),f=l(47992),y=l(58547),q=l(39539),w=l(64272),_=l(29597),I=l(78498),S=l(44414);const k=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],L=e=>{let{location:a,setLocation:l,form:s,image:r,setImage:u}=e;const{t:m}=(0,x.B)();return(0,S.jsxs)(t.A,{gutter:12,children:[(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:m("brand"),name:"brand",rules:[{required:!0,message:m("required")}],children:(0,S.jsx)(d.A,{})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:m("model"),name:"model",rules:[{required:!0,message:m("required")}],children:(0,S.jsx)(d.A,{})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:m("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:m("required")}],children:(0,S.jsx)(o.A,{options:k})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:m("car.number"),name:"number",rules:[{required:!0,message:m("required")}],children:(0,S.jsx)(d.A,{})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:m("car.color"),name:"color",rules:[{required:!0,message:m("required")}],children:(0,S.jsx)(d.A,{})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:m("image"),name:"images",children:(0,S.jsx)(v.A,{type:"deliveryman/setting",imageList:r,setImageList:u,form:s,length:"1",multiple:!0})})}),(0,S.jsx)(i.A,{span:24,children:(0,S.jsx)(n.A.Item,{label:m("map"),name:"location",children:(0,S.jsx)(I.A,{location:a,setLocation:l})})})]})};var N=l(76372),O=l(5436),E=l(4119),B=l(693),C=l(95524),T=l(5689);function F(){var e,a;const{t:l}=(0,x.B)(),[g]=n.A.useForm(),[I,k]=(0,s.useState)(),[F,z]=(0,s.useState)(null),[M,V]=(0,s.useState)(!1),G=(0,c.Zp)(),{role:H}=(0,c.g)(),{settings:J}=(0,p.d4)((e=>e.globalSettings),p.bN),[R,U]=(0,s.useState)((0,_.A)(J));(0,s.useEffect)((()=>()=>{const e=g.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),K((0,A.Ok)({activeMenu:D,data:{...D.data,...e}}))}),[]);const X=(0,c.zy)(),D=(0,p.d4)((e=>e.menu.activeMenu)),K=(0,p.wA)(),[P,W]=(0,s.useState)(null!==D&&void 0!==D&&null!==(e=D.data)&&void 0!==e&&e.image?[null===D||void 0===D||null===(a=D.data)||void 0===a?void 0:a.image]:[]),[Y,Z]=(0,s.useState)([]);return(0,S.jsx)(r.A,{title:l("add.user"),children:(0,S.jsx)(n.A,{form:g,layout:"vertical",initialValues:{gender:"male",...D.data,...(()=>{var e,a;if(null===(e=D.data)||void 0===e||!e.birthday)return{};const l=JSON.parse(null===(a=D.data)||void 0===a?void 0:a.birthday);return{birthday:j()(l)}})()},onFinish:e=>{var a,s;V(!0);const n={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:I,gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:[null===(a=P[0])||void 0===a?void 0:a.name],shop_id:null!==e&&void 0!==e&&e.shop_id?null===e||void 0===e||null===(s=e.shop_id)||void 0===s?void 0:s.map((e=>e.value)):void 0,role:H||void 0},r=X.pathname.search("/user/delivery/")?"deliveries/list":"users/admin";console.log(r),b.A.create(n).then((a=>{let{data:s}=a;const n={color:e.color,number:e.number,type_of_technique:e.type_of_technique,brand:e.brand,model:e.model,user_id:s.id,images:P.map((e=>e.name)),location:{latitude:R.lat,longitude:R.lng}};w.A.create(n).then((()=>{h.oR.success(l("successfully.created")),K((0,A.EK)({...D,nextUrl:r})),G(`/${r}`),K(X.pathname.search("/user/delivery/")?(0,N.N)():(0,q.hU)({role:H}))}))})).catch((e=>z(e.response.data.params))).finally((()=>V(!1)))},children:(0,S.jsxs)(t.A,{gutter:12,children:[(0,S.jsx)(i.A,{span:24,children:(0,S.jsx)(n.A.Item,{rules:[{required:!1,message:l("required")}],label:l("avatar"),children:(0,S.jsx)(v.A,{type:"users",imageList:P,setImageList:W,form:g,multiple:!1})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:l("firstname"),name:"firstname",help:null!==F&&void 0!==F&&F.firstname?F.firstname[0]:null,validateStatus:null!==F&&void 0!==F&&F.firstname?"error":"success",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(d.A,{})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:"lastname",name:"lastname",help:null!==F&&void 0!==F&&F.lastname?F.lastname[0]:null,validateStatus:null!==F&&void 0!==F&&F.lastname?"error":"success",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(d.A,{})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(E.A,{label:l("phone"),name:"phone",error:F})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(T.A,{label:l("birthday"),name:"birthday",valuePropName:"data",onChange:(e,a)=>k(a)})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:l("gender"),name:"gender",rules:[{required:!0,message:l("required")}],children:(0,S.jsxs)(o.A,{picker:"dayTime",className:"w-100",children:[(0,S.jsx)(o.A.Option,{value:"male",children:l("male")}),(0,S.jsx)(o.A.Option,{value:"female",children:l("female")})]})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(O.A,{label:l("email"),name:"user_email",error:F})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(B.A,{label:l("password"),name:"password",error:F})}),"admin"!==H&&"manager"!==H&&"seller"!==H&&"user"!==H&&(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(n.A.Item,{label:l("shop"),name:"shop_id",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(f.G,{mode:"multiple",className:"w-100",placeholder:l("select.shop"),fetchOptions:async function(e){const a={search:e,status:"approved"};return y.A.search(a).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},allowClear:!1})})}),(0,S.jsx)(i.A,{span:12,children:(0,S.jsx)(C.A,{label:l("password.confirmation"),name:"password_confirmation",dependencies:["password"],error:F})}),(0,S.jsx)(u.A,{className:"pt-3 pb-3",dashed:!0,orientation:"left",plain:!0,children:l("deliveryman.settings")}),"deliveryman"===H&&(0,S.jsx)(L,{setLocation:U,location:R,setImage:Z,image:Y,form:g}),(0,S.jsx)(i.A,{span:24,children:(0,S.jsx)(m.A,{type:"primary",htmlType:"submit",loading:M,children:l("save")})})]})})})}},77108:(e,a,l)=>{l.d(a,{A3:()=>n,XV:()=>s});function s(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}function n(e){var a=e.getBoundingClientRect(),l=document.documentElement;return{left:a.left+(window.pageXOffset||l.scrollLeft)-(l.clientLeft||document.body.clientLeft||0),top:a.top+(window.pageYOffset||l.scrollTop)-(l.clientTop||document.body.clientTop||0)}}}}]);